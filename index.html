<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Media in Education - Pricing Calculator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #1a1a1a;
            --text-light: #f5f5f5;
            --entry-purple: #b8b4d4;
            --basic-pink: #e8b4b8;
            --standard-coral: #d4a574;
            --premium-gold: #e8c864;
            --addons-cream: #f5f0e1;
            --accent-yellow: #e8b830;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Libre Baskerville', 'Big Caslon', 'Book Antiqua', Palatino, serif;
            background-color: var(--bg-dark);
            color: var(--text-light);
            min-height: 100vh;
            padding: 40px 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .logo {
            display: block;
            margin: 0 auto 20px auto;
            max-height: 80px;
        }

        h1 {
            text-align: center;
            font-size: 3.5rem;
            font-weight: 400;
            margin-bottom: 10px;
            letter-spacing: 0.02em;
        }

        h1 span {
            color: var(--accent-yellow);
        }

        .subtitle {
            text-align: center;
            font-size: 1.1rem;
            color: #999;
            margin-bottom: 50px;
        }

        .calculator-grid {
            display: grid;
            grid-template-columns: 1fr 380px;
            gap: 40px;
        }

        .products-section {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .product-card {
            background: rgba(255,255,255,0.03);
            border-radius: 16px;
            padding: 25px;
            border: 1px solid rgba(255,255,255,0.08);
        }

        .product-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            cursor: pointer;
        }

        .product-title {
            font-size: 1.8rem;
            font-weight: 400;
        }

        .product-title span {
            color: var(--accent-yellow);
        }

        .product-blurb {
            color: #999;
            font-size: 0.9rem;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .expand-icon {
            font-size: 1.5rem;
            color: #666;
            transition: transform 0.3s ease;
        }

        .product-card.expanded .expand-icon {
            transform: rotate(180deg);
        }

        .product-content {
            display: none;
        }

        .product-card.expanded .product-content {
            display: block;
        }

        .tier-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
            margin-bottom: 20px;
        }

        .tier-btn {
            padding: 15px 10px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-family: inherit;
            font-size: 0.95rem;
            transition: all 0.2s ease;
            text-align: center;
            opacity: 0.7;
            position: relative;
        }

        .tier-btn:hover {
            opacity: 0.9;
        }

        .tier-btn.selected {
            opacity: 1;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }

        .tier-btn.entry { background: var(--entry-purple); color: #333; }
        .tier-btn.basic { background: var(--basic-pink); color: #333; }
        .tier-btn.standard { background: var(--standard-coral); color: #333; }
        .tier-btn.premium { background: var(--premium-gold); color: #333; }

        .tier-header {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 8px;
            position: relative;
        }

        .tier-name {
            font-weight: 700;
            display: block;
            text-align: center;
        }

        .tier-info-btn {
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0,0,0,0.15);
            border: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 0.75rem;
            cursor: pointer;
            color: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
        }

        .tier-info-btn:hover {
            background: rgba(0,0,0,0.25);
        }

        .tier-price {
            font-size: 0.85rem;
            display: block;
            margin-bottom: 10px;
        }

        .tier-qty-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px solid rgba(0,0,0,0.1);
        }

        .tier-qty-btn {
            width: 26px;
            height: 26px;
            border: 1px solid rgba(0,0,0,0.2);
            background: rgba(255,255,255,0.3);
            color: #333;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .tier-qty-btn:hover {
            background: rgba(255,255,255,0.5);
        }

        .tier-qty-display {
            min-width: 24px;
            text-align: center;
            font-size: 1rem;
            font-weight: 700;
        }

        .addons-section {
            border-top: 1px solid rgba(255,255,255,0.1);
            padding-top: 15px;
            margin-top: 10px;
        }

        .addons-title {
            font-size: 0.9rem;
            color: #888;
            margin-bottom: 12px;
        }

        .addon-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .addon-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 14px;
            border: 1px solid rgba(245,240,225,0.3);
            background: transparent;
            color: var(--addons-cream);
            border-radius: 20px;
            font-family: inherit;
            font-size: 0.8rem;
        }

        .addon-item.selected {
            background: rgba(245,240,225,0.15);
            border-color: var(--addons-cream);
        }

        .addon-item.tbd {
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .addon-item.tbd:hover {
            background: rgba(245,240,225,0.1);
        }

        .addon-item.tbd.selected {
            background: rgba(245,240,225,0.15);
        }

        .addon-name {
            white-space: nowrap;
        }

        .addon-qty-controls {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .addon-qty-btn {
            width: 20px;
            height: 20px;
            border: 1px solid rgba(245,240,225,0.3);
            background: transparent;
            color: var(--addons-cream);
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .addon-qty-btn:hover {
            background: rgba(245,240,225,0.1);
        }

        .addon-qty-display {
            min-width: 18px;
            text-align: center;
            font-size: 0.85rem;
        }

        /* Campaigns special layout */
        .campaigns-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        .campaigns-category {
            background: rgba(255,255,255,0.02);
            border-radius: 12px;
            padding: 15px;
        }

        .campaigns-category h4 {
            font-size: 0.95rem;
            color: var(--accent-yellow);
            margin-bottom: 12px;
            font-weight: 400;
        }

        .campaign-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        .campaign-item:last-child {
            border-bottom: none;
        }

        .campaign-item-name {
            font-size: 0.85rem;
            color: #ccc;
        }

        .campaign-item-controls {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .campaign-qty-btn {
            width: 24px;
            height: 24px;
            border: 1px solid rgba(255,255,255,0.2);
            background: transparent;
            color: var(--text-light);
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .campaign-qty-btn:hover {
            background: rgba(255,255,255,0.1);
        }

        .campaign-qty {
            min-width: 20px;
            text-align: center;
            font-size: 0.9rem;
        }

        /* School Productions special layout */
        .productions-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }

        .productions-column {
            background: rgba(255,255,255,0.02);
            border-radius: 12px;
            padding: 15px;
        }

        .productions-column h4 {
            font-size: 1rem;
            margin-bottom: 12px;
            font-weight: 400;
        }

        .productions-column h4.recording { color: var(--entry-purple); }
        .productions-column h4.highlights { color: var(--basic-pink); }
        .productions-column h4.documentary { color: var(--standard-coral); }
        .productions-column h4.fullpackage { color: var(--premium-gold); }

        .production-option {
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 8px;
            font-size: 0.85rem;
            transition: all 0.2s ease;
            border: 1px solid transparent;
        }

        .production-option.selected {
            border-color: currentColor;
            background: rgba(255,255,255,0.08);
        }

        .production-option-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }

        .production-option-header:hover {
            opacity: 0.8;
        }

        .production-option-name {
            font-weight: 700;
            display: block;
        }

        .production-option-price {
            font-size: 0.8rem;
            color: #999;
        }

        /* Summary Panel */
        .summary-panel {
            background: rgba(255,255,255,0.03);
            border-radius: 16px;
            padding: 30px;
            border: 1px solid rgba(255,255,255,0.08);
            position: sticky;
            top: 40px;
            height: fit-content;
        }

        .summary-title {
            font-size: 1.5rem;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .summary-title span {
            color: var(--accent-yellow);
        }

        .summary-items {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 25px;
            min-height: 150px;
            max-height: 400px;
            overflow-y: auto;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            padding: 12px;
            background: rgba(255,255,255,0.03);
            border-radius: 8px;
        }

        .summary-item-details {
            flex: 1;
        }

        .summary-item-name {
            font-size: 0.95rem;
            margin-bottom: 4px;
        }

        .summary-item-tier {
            font-size: 0.8rem;
            color: #888;
        }

        .summary-item-events {
            font-size: 0.75rem;
            color: var(--accent-yellow);
            margin-top: 4px;
        }

        .summary-item-addons {
            font-size: 0.75rem;
            color: #666;
            margin-top: 4px;
        }

        .summary-item-price {
            font-size: 1rem;
            color: var(--accent-yellow);
        }

        .summary-item-price.tbd {
            color: #888;
        }

        .summary-item-remove {
            background: none;
            border: none;
            color: #666;
            cursor: pointer;
            font-size: 1.2rem;
            padding: 0 0 0 10px;
            transition: color 0.2s ease;
        }

        .summary-item-remove:hover {
            color: #ff6b6b;
        }

        .summary-empty {
            color: #666;
            text-align: center;
            padding: 40px 0;
        }

        .summary-totals {
            border-top: 2px solid rgba(255,255,255,0.1);
            padding-top: 20px;
        }

        .summary-line {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .summary-line.subtotal {
            color: #999;
            font-size: 0.95rem;
        }

        .summary-line.gst {
            color: #888;
            font-size: 0.9rem;
        }

        .summary-line.discount {
            color: #4ade80;
            font-size: 0.9rem;
        }

        /* Sports builder */
        .sports-builder {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .sports-activate {
            padding: 20px;
            background: rgba(232, 184, 48, 0.08);
            border: 1px solid rgba(232, 184, 48, 0.2);
            border-radius: 12px;
        }

        .sports-activate-label {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
        }

        .sports-activate-label input {
            display: none;
        }

        .sports-activate-check {
            width: 24px;
            height: 24px;
            border: 2px solid rgba(232, 184, 48, 0.5);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .sports-activate-check:after {
            content: '';
            width: 12px;
            height: 12px;
            background: var(--accent-yellow);
            border-radius: 3px;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .sports-activate-label input:checked + .sports-activate-check {
            border-color: var(--accent-yellow);
        }

        .sports-activate-label input:checked + .sports-activate-check:after {
            opacity: 1;
        }

        .sports-activate-text {
            font-size: 1.1rem;
            color: var(--text-light);
            flex: 1;
        }

        .sports-activate-price {
            font-size: 0.9rem;
            color: #888;
        }

        .sports-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .sports-included-badge {
            font-size: 0.75rem;
            color: #4ade80;
            background: rgba(74, 222, 128, 0.1);
            padding: 4px 10px;
            border-radius: 12px;
        }

        .sports-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            background: rgba(255,255,255,0.03);
            border-radius: 10px;
            flex-wrap: wrap;
            gap: 12px;
        }

        .sports-item-header {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .sports-item-name {
            font-size: 1rem;
            color: var(--text-light);
        }

        .sports-item-desc {
            font-size: 0.8rem;
            color: #888;
        }

        .sports-item-value {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .sports-fixed-price {
            font-size: 1rem;
            color: var(--accent-yellow);
            min-width: 60px;
            text-align: right;
        }

        .sports-calc-price {
            font-size: 1rem;
            color: var(--accent-yellow);
            min-width: 60px;
            text-align: right;
        }

        .sports-slider-container {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 6px;
        }

        .sports-slider {
            width: 150px;
            height: 6px;
            -webkit-appearance: none;
            appearance: none;
            background: rgba(255,255,255,0.1);
            border-radius: 3px;
            outline: none;
        }

        .sports-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            background: var(--accent-yellow);
            border-radius: 50%;
            cursor: pointer;
        }

        .sports-slider::-moz-range-thumb {
            width: 18px;
            height: 18px;
            background: var(--accent-yellow);
            border-radius: 50%;
            cursor: pointer;
            border: none;
        }

        .sports-slider-value {
            font-size: 0.85rem;
            color: #ccc;
        }

        .sports-toggle {
            position: relative;
            width: 50px;
            height: 26px;
            cursor: pointer;
        }

        .sports-toggle input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .sports-toggle-slider {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255,255,255,0.1);
            border-radius: 26px;
            transition: 0.3s;
        }

        .sports-toggle-slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 3px;
            bottom: 3px;
            background: #888;
            border-radius: 50%;
            transition: 0.3s;
        }

        .sports-toggle input:checked + .sports-toggle-slider {
            background: rgba(232, 184, 48, 0.3);
        }

        .sports-toggle input:checked + .sports-toggle-slider:before {
            transform: translateX(24px);
            background: var(--accent-yellow);
        }

        .sports-package-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            background: rgba(232, 184, 48, 0.1);
            border-radius: 10px;
            font-size: 1.1rem;
            margin-top: 8px;
        }

        .sports-package-total span:last-child {
            color: var(--accent-yellow);
            font-weight: 700;
            font-size: 1.3rem;
        }

        .sports-package-note {
            padding: 12px 16px;
            background: rgba(255, 100, 100, 0.1);
            border: 1px solid rgba(255, 100, 100, 0.3);
            border-radius: 8px;
            font-size: 0.85rem;
            color: #ff9999;
        }

        /* Campaigns builder */
        .campaigns-builder {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .campaign-offer {
            padding: 20px;
            background: rgba(255,255,255,0.03);
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.08);
        }

        .campaign-offer-header {
            margin-bottom: 12px;
        }

        .campaign-offer-label {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
        }

        .campaign-offer-label input {
            display: none;
        }

        .campaign-offer-check {
            width: 24px;
            height: 24px;
            border: 2px solid rgba(232, 184, 48, 0.5);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            flex-shrink: 0;
        }

        .campaign-offer-check:after {
            content: '';
            width: 12px;
            height: 12px;
            background: var(--accent-yellow);
            border-radius: 3px;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .campaign-offer-label input:checked + .campaign-offer-check {
            border-color: var(--accent-yellow);
        }

        .campaign-offer-label input:checked + .campaign-offer-check:after {
            opacity: 1;
        }

        .campaign-checkbox-label {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            width: 100%;
        }

        .campaign-checkbox-label input {
            display: none;
        }

        .campaign-checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid rgba(232, 184, 48, 0.5);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            flex-shrink: 0;
            position: relative;
        }

        .campaign-checkbox:after {
            content: '';
            position: absolute;
            left: 5px;
            top: 2px;
            width: 5px;
            height: 9px;
            border: solid var(--accent-yellow);
            border-width: 0 2px 2px 0;
            transform: rotate(45deg);
            opacity: 0;
            transition: opacity 0.2s;
        }

        .campaign-checkbox-label input:checked + .campaign-checkbox {
            border-color: var(--accent-yellow);
        }

        .campaign-checkbox-label input:checked + .campaign-checkbox:after {
            opacity: 1;
        }

        .campaign-checkbox-label .campaign-offer-info-row {
            flex: 1;
        }

        .campaign-offer-info {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .campaign-offer-info-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
        }

        .campaign-offer-name {
            font-size: 1.1rem;
            color: var(--text-light);
        }

        .campaign-offer-price {
            font-size: 1.1rem;
            color: var(--accent-yellow);
            font-weight: 700;
        }

        .campaign-offer-price-small {
            font-size: 0.9rem;
            color: var(--accent-yellow);
        }

        .campaign-offer-desc {
            font-size: 0.85rem;
            color: #999;
            line-height: 1.5;
            margin-bottom: 16px;
        }

        .campaign-slider-row {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            background: rgba(255,255,255,0.03);
            border-radius: 8px;
        }

        .campaign-slider-label {
            font-size: 0.9rem;
            color: #888;
            min-width: 70px;
        }

        .campaign-slider-unit {
            font-size: 0.8rem;
            color: #666;
            margin-right: 10px;
        }

        .campaign-slider {
            flex: 1;
            height: 6px;
            -webkit-appearance: none;
            appearance: none;
            background: rgba(255,255,255,0.1);
            border-radius: 3px;
            outline: none;
        }

        .campaign-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            background: var(--accent-yellow);
            border-radius: 50%;
            cursor: pointer;
        }

        .campaign-slider::-moz-range-thumb {
            width: 18px;
            height: 18px;
            background: var(--accent-yellow);
            border-radius: 50%;
            cursor: pointer;
            border: none;
        }

        .campaign-slider-value {
            font-size: 1rem;
            color: var(--text-light);
            min-width: 30px;
            text-align: center;
        }

        .campaign-slider-total {
            font-size: 1rem;
            color: var(--accent-yellow);
            min-width: 70px;
            text-align: right;
        }

        .summary-line.total {
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .total-label {
            font-size: 1.2rem;
        }

        .total-amount {
            font-size: 2rem;
            color: var(--accent-yellow);
            transition: color 0.3s ease;
        }

        .total-amount.over-budget {
            color: #ef4444;
        }

        .clear-btn {
            width: 100%;
            margin-top: 20px;
            padding: 12px;
            background: transparent;
            border: 1px solid rgba(255,255,255,0.2);
            color: #888;
            border-radius: 8px;
            cursor: pointer;
            font-family: inherit;
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }

        .clear-btn:hover {
            background: rgba(255,255,255,0.05);
            color: var(--text-light);
        }

        /* Budget Setter */
        .budget-setter {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .budget-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .budget-label {
            font-size: 0.9rem;
            color: #999;
        }

        .budget-input-wrapper {
            display: flex;
            align-items: center;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: 6px;
            padding: 6px 10px;
        }

        .budget-currency {
            color: #888;
            margin-right: 4px;
        }

        .budget-input {
            background: transparent;
            border: none;
            color: var(--text-light);
            font-family: inherit;
            font-size: 1rem;
            width: 80px;
            text-align: right;
            outline: none;
        }

        .budget-input::placeholder {
            color: #555;
        }

        .budget-input::-webkit-outer-spin-button,
        .budget-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .budget-progress-container {
            margin-top: 10px;
        }

        .budget-progress-bar {
            height: 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
            overflow: hidden;
        }

        .budget-progress-fill {
            height: 100%;
            background: var(--accent-yellow);
            border-radius: 4px;
            transition: width 0.3s ease, background 0.3s ease;
            width: 0%;
        }

        .budget-progress-fill.warning {
            background: #f59e0b;
        }

        .budget-progress-fill.danger {
            background: #ef4444;
        }

        .budget-progress-text {
            display: flex;
            justify-content: space-between;
            margin-top: 6px;
            font-size: 0.8rem;
            color: #888;
        }

        .budget-gst-toggle {
            margin-top: 10px;
            margin-bottom: 10px;
        }

        .budget-gst-label {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            font-size: 0.85rem;
            color: #999;
        }

        .budget-gst-label input {
            display: none;
        }

        .budget-gst-check {
            width: 16px;
            height: 16px;
            border: 2px solid #555;
            border-radius: 3px;
            position: relative;
            transition: all 0.2s ease;
        }

        .budget-gst-check:after {
            content: '';
            position: absolute;
            left: 4px;
            top: 1px;
            width: 4px;
            height: 8px;
            border: solid var(--accent-yellow);
            border-width: 0 2px 2px 0;
            transform: rotate(45deg);
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .budget-gst-label input:checked + .budget-gst-check {
            border-color: var(--accent-yellow);
        }

        .budget-gst-label input:checked + .budget-gst-check:after {
            opacity: 1;
        }

        .gst-note {
            color: #666;
            font-size: 0.8rem;
            text-align: center;
            margin-top: 10px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        .gst-note-top {
            color: #888;
            font-size: 0.9rem;
            text-align: center;
            margin-top: -35px;
            margin-bottom: 40px;
        }

        /* Over budget warning states */
        .sports-slider.over-budget,
        .campaign-slider.over-budget {
            accent-color: #ef4444;
        }

        .sports-slider.over-budget::-webkit-slider-thumb,
        .campaign-slider.over-budget::-webkit-slider-thumb {
            background: #ef4444;
        }

        .sports-slider.over-budget::-moz-range-thumb,
        .campaign-slider.over-budget::-moz-range-thumb {
            background: #ef4444;
        }

        /* Section-specific over budget styling */
        .sports-builder.over-budget .sports-calc-price,
        .sports-builder.over-budget .sports-fixed-price,
        .sports-builder.over-budget .sports-package-total span:last-child,
        .sports-builder.over-budget .sports-activate-price {
            color: #ef4444 !important;
        }

        .sports-builder.over-budget .sports-activate-label input:checked + .sports-activate-check {
            border-color: #ef4444;
        }

        .sports-builder.over-budget .sports-activate-label input:checked + .sports-activate-check:after {
            border-color: #ef4444;
        }

        .sports-builder.over-budget .sports-toggle input:checked + .sports-toggle-slider {
            background: #ef4444;
        }

        .campaign-offer.over-budget .campaign-slider-total,
        .campaign-offer.over-budget .campaign-offer-price,
        .campaign-offer.over-budget .campaign-offer-price-small {
            color: #ef4444 !important;
        }

        .campaign-offer.over-budget .campaign-checkbox-label input:checked + .campaign-checkbox {
            border-color: #ef4444;
        }

        .campaign-offer.over-budget .campaign-checkbox-label input:checked + .campaign-checkbox:after {
            border-color: #ef4444;
        }

        /* Budget exceeded state */
        .tier-btn.budget-exceeded {
            opacity: 0.4;
            filter: grayscale(70%);
            pointer-events: none;
        }

        .tier-btn.budget-exceeded::after {
            content: 'Over budget';
            position: absolute;
            bottom: 8px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.65rem;
            color: #ef4444;
            white-space: nowrap;
        }

        .sports-activate.budget-exceeded {
            opacity: 0.4;
            filter: grayscale(70%);
            pointer-events: none;
        }

        .production-option.budget-exceeded {
            opacity: 0.4;
            filter: grayscale(70%);
            pointer-events: none;
        }

        .campaign-offer.budget-exceeded {
            opacity: 0.4;
            filter: grayscale(70%);
            pointer-events: none;
        }

        .sports-builder.budget-exceeded {
            opacity: 0.4;
            filter: grayscale(70%);
            pointer-events: none;
        }

        /* Lightbox */
        .lightbox-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.85);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .lightbox-overlay.active {
            display: flex;
        }

        .lightbox-content {
            background: var(--bg-dark);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 16px;
            max-width: 600px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            padding: 30px;
        }

        .lightbox-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
        }

        .lightbox-title {
            font-size: 1.5rem;
            font-weight: 400;
        }

        .lightbox-title span {
            color: var(--accent-yellow);
        }

        .lightbox-close {
            background: none;
            border: none;
            color: #888;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0;
            line-height: 1;
        }

        .lightbox-close:hover {
            color: var(--text-light);
        }

        .lightbox-price {
            font-size: 2rem;
            color: var(--accent-yellow);
            margin-bottom: 20px;
        }

        .lightbox-details {
            list-style: none;
        }

        .lightbox-details li {
            padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            color: #ccc;
            font-size: 0.95rem;
        }

        .lightbox-details li:last-child {
            border-bottom: none;
        }

        @media (max-width: 1100px) {
            .calculator-grid {
                grid-template-columns: 1fr;
            }

            .summary-panel {
                position: relative;
                bottom: auto;
                left: auto;
                right: auto;
                border-radius: 16px;
                max-height: none;
                overflow-y: visible;
                z-index: 1;
                margin-top: 20px;
            }

            .campaigns-grid {
                grid-template-columns: 1fr;
            }

            .productions-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* ===== COMPREHENSIVE MOBILE STYLES ===== */
        @media (max-width: 768px) {
            body {
                padding: 20px 12px;
            }

            .logo {
                max-height: 60px;
            }

            h1 {
                font-size: 2rem;
                margin-bottom: 8px;
            }

            .subtitle {
                font-size: 0.9rem;
                margin-bottom: 15px;
            }

            .gst-note-top {
                font-size: 0.75rem;
            }

            /* Calculator grid becomes single column on mobile */
            .calculator-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            /* Summary panel adjustments - appears after products */
            .summary-panel {
                position: relative;
                top: auto;
                margin-top: 20px;
                padding: 20px;
                order: 2;
            }

            .summary-title {
                font-size: 1.2rem;
            }

            /* Product cards */
            .product-card {
                border-radius: 12px;
            }

            .product-header {
                padding: 15px;
            }

            .product-title {
                font-size: 1.1rem;
            }

            .product-content {
                padding: 15px;
            }

            .product-blurb {
                font-size: 0.85rem;
                margin-bottom: 15px;
                text-align: left;
            }

            /* Tier grid - 2 columns on mobile */
            .tier-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }

            .tier-btn {
                padding: 12px 8px;
                min-height: 90px;
            }

            .tier-name {
                font-size: 0.85rem;
            }

            .tier-price {
                font-size: 1rem;
            }

            .tier-qty {
                transform: scale(0.9);
            }

            .qty-btn {
                width: 28px;
                height: 28px;
                font-size: 1rem;
            }

            /* Productions grid */
            .productions-grid {
                grid-template-columns: 1fr;
                gap: 8px;
            }

            .production-option {
                padding: 12px;
            }

            .production-option-name {
                font-size: 0.9rem;
            }

            .production-option-price {
                font-size: 0.8rem;
            }

            /* Sports builder / sliders */
            .sports-builder {
                border-radius: 10px;
            }

            .sports-activate {
                padding: 12px;
            }

            .sports-activate-label {
                flex-wrap: wrap;
                gap: 8px;
            }

            .sports-activate-text {
                font-size: 0.95rem;
                flex: 1;
                min-width: 120px;
                text-align: left;
            }

            .sports-activate-price {
                font-size: 0.85rem;
            }

            .sports-options {
                padding: 12px;
            }

            .sports-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .sports-item-header {
                width: 100%;
                text-align: left;
            }

            .sports-item-name {
                font-size: 0.9rem;
            }

            .sports-item-desc {
                font-size: 0.75rem;
            }

            .sports-item-value {
                width: 100%;
                justify-content: space-between;
            }

            .sports-slider-container {
                flex: 1;
                max-width: none;
            }

            .sports-slider {
                width: 100%;
            }

            .sports-calc-price {
                font-size: 1rem;
                min-width: 70px;
            }

            .sports-slider-value {
                font-size: 0.8rem;
                min-width: 70px;
            }

            .sports-package-total {
                padding: 12px;
                font-size: 0.95rem;
            }

            /* Campaign section */
            .campaign-offer {
                padding: 15px;
                border-radius: 10px;
            }

            .campaign-offer-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }

            .campaign-offer-name {
                font-size: 1rem;
                text-align: left;
            }

            .campaign-offer-price {
                font-size: 1.1rem;
            }

            .campaign-slider-row {
                flex-direction: column;
                align-items: stretch;
                gap: 10px;
            }

            .campaign-slider-container {
                width: 100%;
            }

            .campaign-slider {
                width: 100%;
            }

            /* Info popup mobile - slide up from bottom */
            .tier-info-popup {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                top: auto;
                transform: none;
                border-radius: 20px 20px 0 0;
                max-height: 70vh;
                overflow-y: auto;
                padding: 20px;
                z-index: 1001;
            }

            .tier-info-popup h4 {
                font-size: 1.2rem;
            }

            .info-price {
                font-size: 1.5rem;
            }

            /* Summary items */
            .summary-item {
                padding: 10px 0;
                flex-wrap: wrap;
                gap: 8px;
            }

            .summary-item-details {
                flex: 1;
                min-width: 150px;
                text-align: left;
            }

            .summary-item-name {
                font-size: 0.9rem;
            }

            .summary-item-tier {
                font-size: 0.75rem;
            }

            .summary-item-price {
                font-size: 0.95rem;
            }

            .summary-item-remove {
                width: 28px;
                height: 28px;
                font-size: 1rem;
            }

            /* Summary totals */
            .summary-totals {
                padding-top: 12px;
            }

            .summary-line {
                font-size: 0.85rem;
                padding: 6px 0;
            }

            .summary-total {
                font-size: 1rem;
                padding: 10px 0;
            }

            .total-amount {
                font-size: 1.4rem;
            }

            /* Budget section */
            .budget-section {
                padding: 15px;
                margin-top: 15px;
            }

            .budget-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .budget-input-group {
                width: 100%;
            }

            .budget-input-group input {
                width: 100%;
                font-size: 1rem;
            }

            .budget-display {
                flex-direction: column;
                gap: 5px;
                text-align: left;
            }

            .budget-bar {
                height: 10px;
            }

            /* GST toggle */
            .gst-toggle-container {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }

            /* Touch-friendly improvements */
            .sports-toggle {
                transform: scale(1.1);
            }

            .sports-activate-check {
                width: 22px;
                height: 22px;
            }

            /* Improve slider touch target */
            .sports-slider, .campaign-slider {
                height: 8px;
            }

            .sports-slider::-webkit-slider-thumb,
            .campaign-slider::-webkit-slider-thumb {
                width: 24px;
                height: 24px;
            }

            .sports-slider::-moz-range-thumb,
            .campaign-slider::-moz-range-thumb {
                width: 24px;
                height: 24px;
            }
        }

        /* Extra small screens */
        @media (max-width: 400px) {
            body {
                padding: 15px 8px;
            }

            h1 {
                font-size: 1.6rem;
            }

            .tier-grid {
                grid-template-columns: 1fr 1fr;
                gap: 6px;
            }

            .tier-btn {
                padding: 10px 6px;
                min-height: 80px;
            }

            .tier-name {
                font-size: 0.75rem;
            }

            .tier-price {
                font-size: 0.9rem;
            }

            .product-title {
                font-size: 1rem;
            }

            .sports-activate-text {
                font-size: 0.85rem;
            }

            .total-amount {
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <img src="https://education.tempero.nz/Assets/Images/TC_2025_Logo.png" alt="Tempero Creations Logo" class="logo" id="company-logo">
        <h1>Media in <span>Education</span></h1>
        <p class="subtitle">Select your products and options to see your total</p>
        <p class="gst-note-top">All prices are GST exclusive</p>

        <div class="calculator-grid">
            <div class="products-section">
                
                <!-- End of Year Highlights -->
                <div class="product-card expanded" data-product="eoy-highlights">
                    <div class="product-header" onclick="toggleProduct(this)">
                        <h2 class="product-title">End of Year <span>Highlights</span></h2>
                        <span class="expand-icon">▼</span>
                    </div>
                    <div class="product-content">
                        <p class="product-blurb">A school year is full of moments that deserve to be remembered! A highlights film brings those memories together into one tight showcase, giving students, families, and staff a chance to look back, celebrate growth, and feel connected. These end of year recaps become part of the school's legacy, and immortalise its story.</p>
                        <div class="tier-grid">
                            <div class="tier-btn entry" data-tier="Entry" data-price="850" data-product="eoy-highlights">
                                <div class="tier-header">
                                    <span class="tier-name">Entry</span>
                                    <button class="tier-info-btn" onclick="event.stopPropagation(); showInfo('eoy-highlights', 'Entry')">i</button>
                                </div>
                                <span class="tier-price">$850</span>
                                <div class="tier-qty-controls">
                                    <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('eoy-highlights', 'Entry', 850, -1)">−</button>
                                    <span class="tier-qty-display" id="qty-eoy-highlights-Entry">0</span>
                                    <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('eoy-highlights', 'Entry', 850, 1)">+</button>
                                </div>
                            </div>
                            <div class="tier-btn basic" data-tier="Basic" data-price="1750" data-product="eoy-highlights">
                                <div class="tier-header">
                                    <span class="tier-name">Basic</span>
                                    <button class="tier-info-btn" onclick="event.stopPropagation(); showInfo('eoy-highlights', 'Basic')">i</button>
                                </div>
                                <span class="tier-price">$1,750</span>
                                <div class="tier-qty-controls">
                                    <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('eoy-highlights', 'Basic', 1750, -1)">−</button>
                                    <span class="tier-qty-display" id="qty-eoy-highlights-Basic">0</span>
                                    <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('eoy-highlights', 'Basic', 1750, 1)">+</button>
                                </div>
                            </div>
                            <div class="tier-btn standard" data-tier="Standard" data-price="3000" data-product="eoy-highlights">
                                <div class="tier-header">
                                    <span class="tier-name">Standard</span>
                                    <button class="tier-info-btn" onclick="event.stopPropagation(); showInfo('eoy-highlights', 'Standard')">i</button>
                                </div>
                                <span class="tier-price">$3,000</span>
                                <div class="tier-qty-controls">
                                    <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('eoy-highlights', 'Standard', 3000, -1)">−</button>
                                    <span class="tier-qty-display" id="qty-eoy-highlights-Standard">0</span>
                                    <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('eoy-highlights', 'Standard', 3000, 1)">+</button>
                                </div>
                            </div>
                            <div class="tier-btn premium" data-tier="Premium" data-price="4500" data-product="eoy-highlights">
                                <div class="tier-header">
                                    <span class="tier-name">Premium</span>
                                    <button class="tier-info-btn" onclick="event.stopPropagation(); showInfo('eoy-highlights', 'Premium')">i</button>
                                </div>
                                <span class="tier-price">$4,500</span>
                                <div class="tier-qty-controls">
                                    <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('eoy-highlights', 'Premium', 4500, -1)">−</button>
                                    <span class="tier-qty-display" id="qty-eoy-highlights-Premium">0</span>
                                    <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('eoy-highlights', 'Premium', 4500, 1)">+</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Day Highlights -->
                <div class="product-card" data-product="day-highlights">
                    <div class="product-header" onclick="toggleProduct(this)">
                        <h2 class="product-title">Day <span>Highlights</span></h2>
                        <span class="expand-icon">▼</span>
                    </div>
                    <div class="product-content">
                        <p class="product-blurb">Some events deserve their own spotlight. Whether it's athletics day, house competitions or a big day out for the cohort! Day Highlights captures a single event and delivers a polished recap you can share straight away. Day Highlights footage can be included for free in an End of Year Highlights product when purchased.</p>
                        <div class="tier-grid">
                            <div class="tier-btn entry" data-tier="Entry" data-price="500" data-product="day-highlights">
                                <div class="tier-header">
                                    <span class="tier-name">Entry</span>
                                    <button class="tier-info-btn" onclick="event.stopPropagation(); showInfo('day-highlights', 'Entry')">i</button>
                                </div>
                                <span class="tier-price">$500</span>
                                <div class="tier-qty-controls">
                                    <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('day-highlights', 'Entry', 500, -1)">−</button>
                                    <span class="tier-qty-display" id="qty-day-highlights-Entry">0</span>
                                    <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('day-highlights', 'Entry', 500, 1)">+</button>
                                </div>
                            </div>
                            <div class="tier-btn basic" data-tier="Basic" data-price="750" data-product="day-highlights">
                                <div class="tier-header">
                                    <span class="tier-name">Basic</span>
                                    <button class="tier-info-btn" onclick="event.stopPropagation(); showInfo('day-highlights', 'Basic')">i</button>
                                </div>
                                <span class="tier-price">$750</span>
                                <div class="tier-qty-controls">
                                    <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('day-highlights', 'Basic', 750, -1)">−</button>
                                    <span class="tier-qty-display" id="qty-day-highlights-Basic">0</span>
                                    <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('day-highlights', 'Basic', 750, 1)">+</button>
                                </div>
                            </div>
                            <div class="tier-btn standard" data-tier="Standard" data-price="1600" data-product="day-highlights">
                                <div class="tier-header">
                                    <span class="tier-name">Standard</span>
                                    <button class="tier-info-btn" onclick="event.stopPropagation(); showInfo('day-highlights', 'Standard')">i</button>
                                </div>
                                <span class="tier-price">$1,600</span>
                                <div class="tier-qty-controls">
                                    <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('day-highlights', 'Standard', 1600, -1)">−</button>
                                    <span class="tier-qty-display" id="qty-day-highlights-Standard">0</span>
                                    <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('day-highlights', 'Standard', 1600, 1)">+</button>
                                </div>
                            </div>
                            <div class="tier-btn premium" data-tier="Premium" data-price="2500" data-product="day-highlights">
                                <div class="tier-header">
                                    <span class="tier-name">Premium</span>
                                    <button class="tier-info-btn" onclick="event.stopPropagation(); showInfo('day-highlights', 'Premium')">i</button>
                                </div>
                                <span class="tier-price">$2,500</span>
                                <div class="tier-qty-controls">
                                    <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('day-highlights', 'Premium', 2500, -1)">−</button>
                                    <span class="tier-qty-display" id="qty-day-highlights-Premium">0</span>
                                    <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('day-highlights', 'Premium', 2500, 1)">+</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Formal Events -->
                <div class="product-card" data-product="formal-events">
                    <div class="product-header" onclick="toggleProduct(this)">
                        <h2 class="product-title">Formal <span>Events</span></h2>
                        <span class="expand-icon">▼</span>
                    </div>
                    <div class="product-content">
                        <p class="product-blurb">School Balls, Formal Prizegivings or Graduation Dinners are key calendar moments for the community. An opportunity to seal those moments in time is to showcase it in a cinematic event video. Share on your school's socials and watch your community spread it like wildfire. This product can be included for free in the End of Year Highlights when purchased.</p>
                        <div class="tier-grid">
                            <div class="tier-btn entry" data-tier="Entry" data-price="500" data-product="formal-events">
                                <div class="tier-header">
                                    <span class="tier-name">Entry</span>
                                    <button class="tier-info-btn" onclick="event.stopPropagation(); showInfo('formal-events', 'Entry')">i</button>
                                </div>
                                <span class="tier-price">$500</span>
                                <div class="tier-qty-controls">
                                    <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('formal-events', 'Entry', 500, -1)">−</button>
                                    <span class="tier-qty-display" id="qty-formal-events-Entry">0</span>
                                    <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('formal-events', 'Entry', 500, 1)">+</button>
                                </div>
                            </div>
                            <div class="tier-btn basic" data-tier="Basic" data-price="1100" data-product="formal-events">
                                <div class="tier-header">
                                    <span class="tier-name">Basic</span>
                                    <button class="tier-info-btn" onclick="event.stopPropagation(); showInfo('formal-events', 'Basic')">i</button>
                                </div>
                                <span class="tier-price">$1,100</span>
                                <div class="tier-qty-controls">
                                    <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('formal-events', 'Basic', 1100, -1)">−</button>
                                    <span class="tier-qty-display" id="qty-formal-events-Basic">0</span>
                                    <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('formal-events', 'Basic', 1100, 1)">+</button>
                                </div>
                            </div>
                            <div class="tier-btn standard" data-tier="Standard" data-price="1450" data-product="formal-events">
                                <div class="tier-header">
                                    <span class="tier-name">Standard</span>
                                    <button class="tier-info-btn" onclick="event.stopPropagation(); showInfo('formal-events', 'Standard')">i</button>
                                </div>
                                <span class="tier-price">$1,450</span>
                                <div class="tier-qty-controls">
                                    <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('formal-events', 'Standard', 1450, -1)">−</button>
                                    <span class="tier-qty-display" id="qty-formal-events-Standard">0</span>
                                    <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('formal-events', 'Standard', 1450, 1)">+</button>
                                </div>
                            </div>
                            <div class="tier-btn premium" data-tier="Premium" data-price="1850" data-product="formal-events">
                                <div class="tier-header">
                                    <span class="tier-name">Premium</span>
                                    <button class="tier-info-btn" onclick="event.stopPropagation(); showInfo('formal-events', 'Premium')">i</button>
                                </div>
                                <span class="tier-price">$1,850</span>
                                <div class="tier-qty-controls">
                                    <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('formal-events', 'Premium', 1850, -1)">−</button>
                                    <span class="tier-qty-display" id="qty-formal-events-Premium">0</span>
                                    <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('formal-events', 'Premium', 1850, 1)">+</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- School Productions -->
                <div class="product-card" data-product="school-productions">
                    <div class="product-header" onclick="toggleProduct(this)">
                        <h2 class="product-title">School <span>Productions</span></h2>
                        <span class="expand-icon">▼</span>
                    </div>
                    <div class="product-content">
                        <p class="product-blurb">It's showtime! Check out our flexible options so you can choose what fits your show needs and budget - whether that's simply a recording for families to look back on, a cinematic highlights reel to bring the memories to life, or a behind-the-scenes documentary that cements the show as a part of the school's history.</p>
                        <div class="productions-grid">
                            <div class="productions-column">
                                <h4 class="recording">Recording</h4>
                                <div class="production-option" style="color: var(--entry-purple);">
                                    <div class="production-option-header" onclick="showInfo('school-productions', 'recording-basic')">
                                        <div>
                                            <span class="production-option-name">Basic</span>
                                            <span class="production-option-price">1 camera · $600/show</span>
                                        </div>
                                    </div>
                                    <div class="tier-qty-controls" style="border-color: rgba(184,180,212,0.3);">
                                        <button class="tier-qty-btn" onclick="changeProductionQty('recording-basic', 'Recording Basic (1 cam)', 600, -1)">−</button>
                                        <span class="tier-qty-display" id="qty-recording-basic">0</span>
                                        <button class="tier-qty-btn" onclick="changeProductionQty('recording-basic', 'Recording Basic (1 cam)', 600, 1)">+</button>
                                    </div>
                                </div>
                                <div class="production-option" style="color: var(--entry-purple);">
                                    <div class="production-option-header" onclick="showInfo('school-productions', 'recording-standard')">
                                        <div>
                                            <span class="production-option-name">Standard</span>
                                            <span class="production-option-price">2 cameras · $900/show</span>
                                        </div>
                                    </div>
                                    <div class="tier-qty-controls" style="border-color: rgba(184,180,212,0.3);">
                                        <button class="tier-qty-btn" onclick="changeProductionQty('recording-standard', 'Recording Standard (2 cam)', 900, -1)">−</button>
                                        <span class="tier-qty-display" id="qty-recording-standard">0</span>
                                        <button class="tier-qty-btn" onclick="changeProductionQty('recording-standard', 'Recording Standard (2 cam)', 900, 1)">+</button>
                                    </div>
                                </div>
                                <div class="production-option" style="color: var(--entry-purple);">
                                    <div class="production-option-header" onclick="showInfo('school-productions', 'recording-premium')">
                                        <div>
                                            <span class="production-option-name">Premium</span>
                                            <span class="production-option-price">3 cameras · $1,200/show</span>
                                        </div>
                                    </div>
                                    <div class="tier-qty-controls" style="border-color: rgba(184,180,212,0.3);">
                                        <button class="tier-qty-btn" onclick="changeProductionQty('recording-premium', 'Recording Premium (3 cam)', 1200, -1)">−</button>
                                        <span class="tier-qty-display" id="qty-recording-premium">0</span>
                                        <button class="tier-qty-btn" onclick="changeProductionQty('recording-premium', 'Recording Premium (3 cam)', 1200, 1)">+</button>
                                    </div>
                                </div>
                            </div>
                            <div class="productions-column">
                                <h4 class="highlights">Highlights</h4>
                                <div class="production-option" style="color: var(--basic-pink);">
                                    <div class="production-option-header" onclick="showInfo('school-productions', 'highlights-standard')">
                                        <div>
                                            <span class="production-option-name">Standard</span>
                                            <span class="production-option-price">2 min · $800</span>
                                        </div>
                                    </div>
                                    <div class="tier-qty-controls" style="border-color: rgba(232,180,184,0.3);">
                                        <button class="tier-qty-btn" onclick="changeProductionQty('highlights-standard', 'Highlights Standard', 800, -1)">−</button>
                                        <span class="tier-qty-display" id="qty-highlights-standard">0</span>
                                        <button class="tier-qty-btn" onclick="changeProductionQty('highlights-standard', 'Highlights Standard', 800, 1)">+</button>
                                    </div>
                                </div>
                                <div class="production-option" style="color: var(--basic-pink);">
                                    <div class="production-option-header" onclick="showInfo('school-productions', 'highlights-premium')">
                                        <div>
                                            <span class="production-option-name">Premium</span>
                                            <span class="production-option-price">4-5 min · $1,400</span>
                                        </div>
                                    </div>
                                    <div class="tier-qty-controls" style="border-color: rgba(232,180,184,0.3);">
                                        <button class="tier-qty-btn" onclick="changeProductionQty('highlights-premium', 'Highlights Premium', 1400, -1)">−</button>
                                        <span class="tier-qty-display" id="qty-highlights-premium">0</span>
                                        <button class="tier-qty-btn" onclick="changeProductionQty('highlights-premium', 'Highlights Premium', 1400, 1)">+</button>
                                    </div>
                                </div>
                            </div>
                            <div class="productions-column">
                                <h4 class="documentary">Documentary</h4>
                                <div class="production-option" style="color: var(--standard-coral);">
                                    <div class="production-option-header" onclick="showInfo('school-productions', 'documentary')">
                                        <div>
                                            <span class="production-option-name">Full Documentary</span>
                                            <span class="production-option-price">15-20 min · $2,000</span>
                                        </div>
                                    </div>
                                    <div class="tier-qty-controls" style="border-color: rgba(212,165,116,0.3);">
                                        <button class="tier-qty-btn" onclick="changeProductionQty('documentary', 'Documentary', 2000, -1)">−</button>
                                        <span class="tier-qty-display" id="qty-documentary">0</span>
                                        <button class="tier-qty-btn" onclick="changeProductionQty('documentary', 'Documentary', 2000, 1)">+</button>
                                    </div>
                                </div>
                            </div>
                            <div class="productions-column">
                                <h4 class="fullpackage">Full Package</h4>
                                <div class="production-option" style="color: var(--premium-gold);">
                                    <div class="production-option-header" onclick="showInfo('school-productions', 'full-package')">
                                        <div>
                                            <span class="production-option-name">Everything</span>
                                            <span class="production-option-price">All included · $3,300</span>
                                        </div>
                                    </div>
                                    <div class="tier-qty-controls" style="border-color: rgba(232,200,100,0.3);">
                                        <button class="tier-qty-btn" onclick="changeProductionQty('full-package', 'Full Package', 3300, -1)">−</button>
                                        <span class="tier-qty-display" id="qty-full-package">0</span>
                                        <button class="tier-qty-btn" onclick="changeProductionQty('full-package', 'Full Package', 3300, 1)">+</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Advertising & Campaigns -->
                <div class="product-card" data-product="campaigns">
                    <div class="product-header" onclick="toggleProduct(this)">
                        <h2 class="product-title">Advertising & <span>Campaigns</span></h2>
                        <span class="expand-icon">▼</span>
                    </div>
                    <div class="product-content">
                        <p class="product-blurb">Every school has a story to tell. Whether you're attracting international students, launching a new initiative, or simply showcasing what makes your community special - we'll help you craft a message that resonates. Please browse our unique offers!</p>
                        <div class="campaigns-builder">
                            <div class="campaign-offer">
                                <div class="campaign-offer-header">
                                    <label class="campaign-offer-label">
                                        <input type="checkbox" id="campaign-international" onchange="updateCampaigns()">
                                        <span class="campaign-offer-check"></span>
                                        <div class="campaign-offer-info">
                                            <span class="campaign-offer-name">International Students Advertising Campaign</span>
                                            <span class="campaign-offer-price">$3,500</span>
                                        </div>
                                    </label>
                                </div>
                                <p class="campaign-offer-desc">Capture school life of your international students doing lots of unique and fun activities around the school. Include key parts of study and co-curricular life. Showcase their experience of New Zealand culture and staying with a homestay family. This premium product offers up to two days of production onsite and unlimited revisions.</p>
                            </div>
                            <div class="campaign-offer" id="campaign-ourselves-offer">
                                <div class="campaign-offer-header">
                                    <label class="campaign-checkbox-label">
                                        <input type="checkbox" id="campaign-ourselves-activate" onchange="toggleOurselvesCampaign()">
                                        <span class="campaign-checkbox"></span>
                                        <div class="campaign-offer-info-row">
                                            <span class="campaign-offer-name">"Introducing Ourselves to Ourselves"</span>
                                            <span class="campaign-offer-price-small" id="campaign-ourselves-price-hint">from $800</span>
                                        </div>
                                    </label>
                                </div>
                                <p class="campaign-offer-desc">A resource for building connection within your school community. These short videos give a platform to unique voices - students, staff, or whanau - sharing stories, perspectives, or insights that help your community understand itself better. Each video is about 1-2 minutes long.</p>
                                <div class="campaign-slider-row" id="campaign-ourselves-slider-row" style="display: none;">
                                    <span class="campaign-slider-label">Videos:</span>
                                    <span class="campaign-slider-unit">$800/video</span>
                                    <input type="range" id="campaign-ourselves" min="1" max="10" value="1" class="campaign-slider sports-slider" oninput="updateCampaigns()">
                                    <span class="campaign-slider-value" id="campaign-ourselves-value">1</span>
                                    <span class="campaign-slider-total" id="campaign-ourselves-total">$800</span>
                                </div>
                            </div>
                            <div class="campaign-offer" id="campaign-testimonials-offer">
                                <div class="campaign-offer-header">
                                    <label class="campaign-checkbox-label">
                                        <input type="checkbox" id="campaign-testimonials-activate" onchange="toggleTestimonialsCampaign()">
                                        <span class="campaign-checkbox"></span>
                                        <div class="campaign-offer-info-row">
                                            <span class="campaign-offer-name">Student/Staff Testimonials</span>
                                            <span class="campaign-offer-price-small" id="campaign-testimonials-price-hint">from $175</span>
                                        </div>
                                    </label>
                                </div>
                                <p class="campaign-offer-desc">Direct-to-camera storytelling, designed to be purchased in bulk. These testimonials let students or staff speak in their own words about what makes your school special. Perfect for promoting departments, co-curricular programmes, or encouraging prospective families to see themselves at your school. Each interview is about 1-2 minutes long.</p>
                                <div class="campaign-slider-row" id="campaign-testimonials-slider-row" style="display: none;">
                                    <span class="campaign-slider-label">Interviews:</span>
                                    <span class="campaign-slider-unit">$150/interview</span>
                                    <input type="range" id="campaign-testimonials" min="1" max="30" value="1" class="campaign-slider sports-slider" oninput="updateCampaigns()">
                                    <span class="campaign-slider-value" id="campaign-testimonials-value">1</span>
                                    <span class="campaign-slider-total" id="campaign-testimonials-total">$150</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Themed Highlights -->
                <div class="product-card" data-product="themed-highlights">
                    <div class="product-header" onclick="toggleProduct(this)">
                        <h2 class="product-title">Themed <span>Highlights</span></h2>
                        <span class="expand-icon">▼</span>
                    </div>
                    <div class="product-content">
                        <p class="product-blurb">Build highlight reels around the themes that matter most to your school community. Whether it's sports action, arts performances, or cultural events - we capture the moments and craft them into videos your community will watch on repeat.</p>
                        
                        <!-- Sports Package -->
                        <div class="sports-builder" style="margin-bottom: 25px;">
                            <div class="sports-activate">
                                <label class="sports-activate-label">
                                    <input type="checkbox" id="sports-activate" onchange="toggleSportsPackage()">
                                    <span class="sports-activate-check"></span>
                                    <span class="sports-activate-text">Sports Package</span>
                                    <span class="sports-activate-price">from $800</span>
                                </label>
                            </div>
                            <div class="sports-options" id="sports-options" style="display: none;">
                                <div class="sports-item">
                                    <div class="sports-item-header">
                                        <span class="sports-item-name">Base fee</span>
                                        <span class="sports-item-desc">Travel, admin & gear cover</span>
                                    </div>
                                    <div class="sports-item-value">
                                        <span class="sports-fixed-price">$350</span>
                                        <span class="sports-included-badge">Included</span>
                                    </div>
                                </div>
                                <div class="sports-item">
                                    <div class="sports-item-header">
                                        <span class="sports-item-name">Game coverage</span>
                                        <span class="sports-item-desc">$60/game</span>
                                    </div>
                                    <div class="sports-item-value">
                                        <span class="sports-calc-price" id="sports-games-total">$300</span>
                                        <div class="sports-slider-container">
                                            <input type="range" id="sports-games" min="5" max="30" value="5" class="sports-slider" oninput="updateSports()">
                                            <span class="sports-slider-value" id="sports-games-value">5 games</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="sports-item">
                                    <div class="sports-item-header">
                                        <span class="sports-item-name">Video length</span>
                                        <span class="sports-item-desc">$150/minute</span>
                                    </div>
                                    <div class="sports-item-value">
                                        <span class="sports-calc-price" id="sports-video-total">$150</span>
                                        <div class="sports-slider-container">
                                            <input type="range" id="sports-video" min="1" max="6" value="1" class="sports-slider" oninput="updateSports()">
                                            <span class="sports-slider-value" id="sports-video-value">1 min</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="sports-item">
                                    <div class="sports-item-header">
                                        <span class="sports-item-name">Social media cut</span>
                                        <span class="sports-item-desc">Optional vertical edit</span>
                                    </div>
                                    <div class="sports-item-value">
                                        <span class="sports-fixed-price">$250</span>
                                        <label class="sports-toggle">
                                            <input type="checkbox" id="sports-social" onchange="updateSports()">
                                            <span class="sports-toggle-slider"></span>
                                        </label>
                                    </div>
                                </div>
                                <div class="sports-package-total">
                                    <span>Sports total:</span>
                                    <span id="sports-total">$800</span>
                                </div>
                            </div>
                        </div>

                        <!-- Arts Package -->
                        <div class="sports-builder">
                            <div class="sports-activate">
                                <label class="sports-activate-label">
                                    <input type="checkbox" id="arts-activate" onchange="toggleArtsPackage()">
                                    <span class="sports-activate-check"></span>
                                    <span class="sports-activate-text">Arts Package</span>
                                    <span class="sports-activate-price">from $850</span>
                                </label>
                            </div>
                            <div class="sports-options" id="arts-options" style="display: none;">
                                <div class="sports-item">
                                    <div class="sports-item-header">
                                        <span class="sports-item-name">Base fee</span>
                                        <span class="sports-item-desc">Travel, admin & gear cover</span>
                                    </div>
                                    <div class="sports-item-value">
                                        <span class="sports-fixed-price">$350</span>
                                        <span class="sports-included-badge">Included</span>
                                    </div>
                                </div>
                                <div class="sports-item">
                                    <div class="sports-item-header">
                                        <span class="sports-item-name">Event coverage</span>
                                        <span class="sports-item-desc">$70/event</span>
                                    </div>
                                    <div class="sports-item-value">
                                        <span class="sports-calc-price" id="arts-events-total">$350</span>
                                        <div class="sports-slider-container">
                                            <input type="range" id="arts-events" min="5" max="30" value="5" class="sports-slider" oninput="updateArts()">
                                            <span class="sports-slider-value" id="arts-events-value">5 events</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="sports-item">
                                    <div class="sports-item-header">
                                        <span class="sports-item-name">Video length</span>
                                        <span class="sports-item-desc">$150/minute</span>
                                    </div>
                                    <div class="sports-item-value">
                                        <span class="sports-calc-price" id="arts-video-total">$150</span>
                                        <div class="sports-slider-container">
                                            <input type="range" id="arts-video" min="1" max="6" value="1" class="sports-slider" oninput="updateArts()">
                                            <span class="sports-slider-value" id="arts-video-value">1 min</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="sports-item">
                                    <div class="sports-item-header">
                                        <span class="sports-item-name">Social media cut</span>
                                        <span class="sports-item-desc">Optional vertical edit</span>
                                    </div>
                                    <div class="sports-item-value">
                                        <span class="sports-fixed-price">$250</span>
                                        <label class="sports-toggle">
                                            <input type="checkbox" id="arts-social" onchange="updateArts()">
                                            <span class="sports-toggle-slider"></span>
                                        </label>
                                    </div>
                                </div>
                                <div class="sports-package-total">
                                    <span>Arts total:</span>
                                    <span id="arts-total">$850</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recap Website -->
                <div class="product-card" data-product="recap-website">
                    <div class="product-header" onclick="toggleProduct(this)">
                        <h2 class="product-title">Recap <span>Website</span></h2>
                        <span class="expand-icon">▼</span>
                    </div>
                    <div class="product-content">
                        <p class="product-blurb">Your school's digital yearbook - look back on the best moments, bring all the videos into one place and make it the perfect end-of-year gift to send out to your community.</p>
                        <div class="tier-grid">
                            <div class="tier-btn entry" data-product="recap-website" data-tier="Entry" data-price="350">
                                <div class="tier-header">
                                    <span class="tier-name">Entry</span>
                                    <button class="tier-info-btn" onclick="event.stopPropagation(); showInfo('recap-website', 'Entry')">i</button>
                                </div>
                                <span class="tier-price">$350</span>
                                <div class="tier-qty-controls">
                                    <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('recap-website', 'Entry', 350, -1)">−</button>
                                    <span class="tier-qty-display" id="qty-recap-website-Entry">0</span>
                                    <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('recap-website', 'Entry', 350, 1)">+</button>
                                </div>
                            </div>
                            <div class="tier-btn basic" data-product="recap-website" data-tier="Basic" data-price="450">
                                <div class="tier-header">
                                    <span class="tier-name">Basic</span>
                                    <button class="tier-info-btn" onclick="event.stopPropagation(); showInfo('recap-website', 'Basic')">i</button>
                                </div>
                                <span class="tier-price">$450</span>
                                <div class="tier-qty-controls">
                                    <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('recap-website', 'Basic', 450, -1)">−</button>
                                    <span class="tier-qty-display" id="qty-recap-website-Basic">0</span>
                                    <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('recap-website', 'Basic', 450, 1)">+</button>
                                </div>
                            </div>
                            <div class="tier-btn standard" data-product="recap-website" data-tier="Standard" data-price="550">
                                <div class="tier-header">
                                    <span class="tier-name">Standard</span>
                                    <button class="tier-info-btn" onclick="event.stopPropagation(); showInfo('recap-website', 'Standard')">i</button>
                                </div>
                                <span class="tier-price">$550</span>
                                <div class="tier-qty-controls">
                                    <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('recap-website', 'Standard', 550, -1)">−</button>
                                    <span class="tier-qty-display" id="qty-recap-website-Standard">0</span>
                                    <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('recap-website', 'Standard', 550, 1)">+</button>
                                </div>
                            </div>
                            <div class="tier-btn premium" data-product="recap-website" data-tier="Premium" data-price="700">
                                <div class="tier-header">
                                    <span class="tier-name">Premium</span>
                                    <button class="tier-info-btn" onclick="event.stopPropagation(); showInfo('recap-website', 'Premium')">i</button>
                                </div>
                                <span class="tier-price">$700</span>
                                <div class="tier-qty-controls">
                                    <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('recap-website', 'Premium', 700, -1)">−</button>
                                    <span class="tier-qty-display" id="qty-recap-website-Premium">0</span>
                                    <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('recap-website', 'Premium', 700, 1)">+</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Event Photography -->
                <div class="product-card" data-product="event-photography">
                    <div class="product-header" onclick="toggleProduct(this)">
                        <h2 class="product-title">Event <span>Photography</span></h2>
                        <span class="expand-icon">▼</span>
                    </div>
                    <div class="product-content">
                        <p class="product-blurb">Professional photography to capture your school's important moments. Each session includes one hour of shooting and one hour of editing, delivering polished images ready to share.</p>
                        <div class="sports-builder">
                            <div class="sports-activate">
                                <label class="sports-activate-label">
                                    <input type="checkbox" id="photography-activate" onchange="togglePhotography()">
                                    <span class="sports-activate-check"></span>
                                    <span class="sports-activate-text">Event Photography</span>
                                    <span class="sports-activate-price">from $175</span>
                                </label>
                            </div>
                            <div class="sports-options" id="photography-options" style="display: none;">
                                <div class="sports-item">
                                    <div class="sports-item-header">
                                        <span class="sports-item-name">Photography sessions</span>
                                        <span class="sports-item-desc">$150/session (1hr shoot + 1hr edit)</span>
                                    </div>
                                    <div class="sports-item-value">
                                        <span class="sports-calc-price" id="photography-total">$150</span>
                                        <div class="sports-slider-container">
                                            <input type="range" id="photography-sessions" min="1" max="15" value="1" class="sports-slider" oninput="updatePhotography()">
                                            <span class="sports-slider-value" id="photography-sessions-value">1 session</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Graphic Design -->
                <div class="product-card" data-product="graphic-design">
                    <div class="product-header" onclick="toggleProduct(this)">
                        <h2 class="product-title">Graphic <span>Design</span></h2>
                        <span class="expand-icon">▼</span>
                    </div>
                    <div class="product-content">
                        <p class="product-blurb">Professional design services to elevate your school's visual communications. From production pamphlets to advertising posters, we create polished materials that represent your school with style.</p>
                        
                        <!-- School Production Pamphlets -->
                        <div style="margin-bottom: 25px;">
                            <h4 style="color: var(--accent-yellow); margin-bottom: 15px; font-weight: 400;">School Production Pamphlets</h4>
                            <div class="tier-grid">
                                <div class="tier-btn entry" data-product="pamphlets" data-tier="Entry" data-price="350">
                                    <div class="tier-header">
                                        <span class="tier-name">Entry</span>
                                        <button class="tier-info-btn" onclick="event.stopPropagation(); showInfo('pamphlets', 'Entry')">i</button>
                                    </div>
                                    <span class="tier-price">$350</span>
                                    <div class="tier-qty-controls">
                                        <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('pamphlets', 'Entry', 350, -1)">−</button>
                                        <span class="tier-qty-display" id="qty-pamphlets-Entry">0</span>
                                        <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('pamphlets', 'Entry', 350, 1)">+</button>
                                    </div>
                                </div>
                                <div class="tier-btn basic" data-product="pamphlets" data-tier="Basic" data-price="550">
                                    <div class="tier-header">
                                        <span class="tier-name">Basic</span>
                                        <button class="tier-info-btn" onclick="event.stopPropagation(); showInfo('pamphlets', 'Basic')">i</button>
                                    </div>
                                    <span class="tier-price">$550</span>
                                    <div class="tier-qty-controls">
                                        <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('pamphlets', 'Basic', 550, -1)">−</button>
                                        <span class="tier-qty-display" id="qty-pamphlets-Basic">0</span>
                                        <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('pamphlets', 'Basic', 550, 1)">+</button>
                                    </div>
                                </div>
                                <div class="tier-btn standard" data-product="pamphlets" data-tier="Standard" data-price="650">
                                    <div class="tier-header">
                                        <span class="tier-name">Standard</span>
                                        <button class="tier-info-btn" onclick="event.stopPropagation(); showInfo('pamphlets', 'Standard')">i</button>
                                    </div>
                                    <span class="tier-price">$650</span>
                                    <div class="tier-qty-controls">
                                        <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('pamphlets', 'Standard', 650, -1)">−</button>
                                        <span class="tier-qty-display" id="qty-pamphlets-Standard">0</span>
                                        <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('pamphlets', 'Standard', 650, 1)">+</button>
                                    </div>
                                </div>
                                <div class="tier-btn premium" data-product="pamphlets" data-tier="Premium" data-price="850">
                                    <div class="tier-header">
                                        <span class="tier-name">Premium</span>
                                        <button class="tier-info-btn" onclick="event.stopPropagation(); showInfo('pamphlets', 'Premium')">i</button>
                                    </div>
                                    <span class="tier-price">$850</span>
                                    <div class="tier-qty-controls">
                                        <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('pamphlets', 'Premium', 850, -1)">−</button>
                                        <span class="tier-qty-display" id="qty-pamphlets-Premium">0</span>
                                        <button class="tier-qty-btn" onclick="event.stopPropagation(); changeTierQty('pamphlets', 'Premium', 850, 1)">+</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Advertising Posters -->
                        <div>
                            <h4 style="color: var(--accent-yellow); margin-bottom: 15px; font-weight: 400;">Advertising Posters</h4>
                            <div class="sports-builder">
                                <div class="sports-activate">
                                    <label class="sports-activate-label">
                                        <input type="checkbox" id="posters-activate" onchange="togglePosters()">
                                        <span class="sports-activate-check"></span>
                                        <span class="sports-activate-text">Poster Design</span>
                                        <span class="sports-activate-price">from $75</span>
                                    </label>
                                </div>
                                <div class="sports-options" id="posters-options" style="display: none;">
                                    <div class="sports-item">
                                        <div class="sports-item-header">
                                            <span class="sports-item-name">Poster designs</span>
                                            <span class="sports-item-desc">$75/poster (A3 design included)</span>
                                        </div>
                                        <div class="sports-item-value">
                                            <span class="sports-calc-price" id="posters-base-total">$75</span>
                                            <div class="sports-slider-container">
                                                <input type="range" id="posters-qty" min="1" max="30" value="1" class="sports-slider" oninput="updatePosters()">
                                                <span class="sports-slider-value" id="posters-qty-value">1 poster</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="sports-item" style="border-top: 1px solid rgba(255,255,255,0.1); padding-top: 15px; margin-top: 10px;">
                                        <div class="sports-item-header">
                                            <span class="sports-item-name">Additional formats</span>
                                            <span class="sports-item-desc">Added to each poster</span>
                                        </div>
                                    </div>
                                    <div class="sports-item" style="padding-top: 5px;">
                                        <div class="sports-item-header">
                                            <span class="sports-item-name">1×1 Square</span>
                                            <span class="sports-item-desc">+$5/poster</span>
                                        </div>
                                        <div class="sports-item-value">
                                            <label class="sports-toggle">
                                                <input type="checkbox" id="posters-1x1" onchange="updatePosters()">
                                                <span class="sports-toggle-slider"></span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="sports-item">
                                        <div class="sports-item-header">
                                            <span class="sports-item-name">16×9 Landscape</span>
                                            <span class="sports-item-desc">+$5/poster</span>
                                        </div>
                                        <div class="sports-item-value">
                                            <label class="sports-toggle">
                                                <input type="checkbox" id="posters-16x9" onchange="updatePosters()">
                                                <span class="sports-toggle-slider"></span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="sports-item">
                                        <div class="sports-item-header">
                                            <span class="sports-item-name">9×16 Portrait</span>
                                            <span class="sports-item-desc">+$5/poster</span>
                                        </div>
                                        <div class="sports-item-value">
                                            <label class="sports-toggle">
                                                <input type="checkbox" id="posters-9x16" onchange="updatePosters()">
                                                <span class="sports-toggle-slider"></span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="sports-package-total">
                                        <span>Posters total:</span>
                                        <span id="posters-total">$75</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Student Training -->
                <div class="product-card" data-product="student-training">
                    <div class="product-header" onclick="toggleProduct(this)">
                        <h2 class="product-title">Student <span>Training</span></h2>
                        <span class="expand-icon">▼</span>
                    </div>
                    <div class="product-content">
                        <p class="product-blurb">Empower your students with hands-on video production skills. Our training sessions cover everything from basic camera operation to editing techniques, building capability within your school community.</p>
                        <p style="color: #999; font-size: 0.85rem; margin-bottom: 20px;">Minimum of 5 students required per session</p>
                        
                        <div class="training-tiers">
                            <!-- Entry Training -->
                            <div class="sports-builder" style="margin-bottom: 20px;">
                                <div class="sports-activate">
                                    <label class="sports-activate-label">
                                        <input type="checkbox" id="training-entry-activate" onchange="toggleTraining('entry')">
                                        <span class="sports-activate-check"></span>
                                        <span class="sports-activate-text">Entry Training</span>
                                        <span class="sports-activate-price">from $125</span>
                                    </label>
                                </div>
                                <div class="sports-options" id="training-entry-options" style="display: none;">
                                    <p style="color: #aaa; font-size: 0.85rem; margin-bottom: 15px;">1 hour entry level session into camera operating</p>
                                    <div class="sports-item">
                                        <div class="sports-item-header">
                                            <span class="sports-item-name">Students</span>
                                            <span class="sports-item-desc">5 minimum</span>
                                        </div>
                                        <div class="sports-item-value">
                                            <span class="sports-calc-price" id="training-entry-students-cost">$125</span>
                                            <div class="sports-slider-container">
                                                <input type="range" id="training-entry-students" min="5" max="20" value="5" class="sports-slider" oninput="updateTraining('entry')">
                                                <span class="sports-slider-value" id="training-entry-students-value">5 students</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="sports-item">
                                        <div class="sports-item-header">
                                            <span class="sports-item-name">Days</span>
                                            <span class="sports-item-desc">Multiplies student fee</span>
                                        </div>
                                        <div class="sports-item-value">
                                            <span class="sports-calc-price" id="training-entry-total">$125</span>
                                            <div class="sports-slider-container">
                                                <input type="range" id="training-entry-days" min="1" max="5" value="1" class="sports-slider" oninput="updateTraining('entry')">
                                                <span class="sports-slider-value" id="training-entry-days-value">1 day</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Basic Training -->
                            <div class="sports-builder" style="margin-bottom: 20px;">
                                <div class="sports-activate">
                                    <label class="sports-activate-label">
                                        <input type="checkbox" id="training-basic-activate" onchange="toggleTraining('basic')">
                                        <span class="sports-activate-check"></span>
                                        <span class="sports-activate-text">Basic Training</span>
                                        <span class="sports-activate-price">from $175</span>
                                    </label>
                                </div>
                                <div class="sports-options" id="training-basic-options" style="display: none;">
                                    <p style="color: #aaa; font-size: 0.85rem; margin-bottom: 15px;">2 hour beginner's guide to basic camera operation & shooting techniques</p>
                                    <div class="sports-item">
                                        <div class="sports-item-header">
                                            <span class="sports-item-name">Students</span>
                                            <span class="sports-item-desc">5 minimum</span>
                                        </div>
                                        <div class="sports-item-value">
                                            <span class="sports-calc-price" id="training-basic-students-cost">$175</span>
                                            <div class="sports-slider-container">
                                                <input type="range" id="training-basic-students" min="5" max="20" value="5" class="sports-slider" oninput="updateTraining('basic')">
                                                <span class="sports-slider-value" id="training-basic-students-value">5 students</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="sports-item">
                                        <div class="sports-item-header">
                                            <span class="sports-item-name">Days</span>
                                            <span class="sports-item-desc">Multiplies student fee</span>
                                        </div>
                                        <div class="sports-item-value">
                                            <span class="sports-calc-price" id="training-basic-total">$175</span>
                                            <div class="sports-slider-container">
                                                <input type="range" id="training-basic-days" min="1" max="5" value="1" class="sports-slider" oninput="updateTraining('basic')">
                                                <span class="sports-slider-value" id="training-basic-days-value">1 day</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Standard Training -->
                            <div class="sports-builder" style="margin-bottom: 20px;">
                                <div class="sports-activate">
                                    <label class="sports-activate-label">
                                        <input type="checkbox" id="training-standard-activate" onchange="toggleTraining('standard')">
                                        <span class="sports-activate-check"></span>
                                        <span class="sports-activate-text">Standard Training</span>
                                        <span class="sports-activate-price">from $265</span>
                                    </label>
                                </div>
                                <div class="sports-options" id="training-standard-options" style="display: none;">
                                    <p style="color: #aaa; font-size: 0.85rem; margin-bottom: 15px;">Half day course covering basic camera operation, shooting techniques and entry level editing</p>
                                    <div class="sports-item">
                                        <div class="sports-item-header">
                                            <span class="sports-item-name">Students</span>
                                            <span class="sports-item-desc">5 minimum</span>
                                        </div>
                                        <div class="sports-item-value">
                                            <span class="sports-calc-price" id="training-standard-students-cost">$265</span>
                                            <div class="sports-slider-container">
                                                <input type="range" id="training-standard-students" min="5" max="20" value="5" class="sports-slider" oninput="updateTraining('standard')">
                                                <span class="sports-slider-value" id="training-standard-students-value">5 students</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="sports-item">
                                        <div class="sports-item-header">
                                            <span class="sports-item-name">Days</span>
                                            <span class="sports-item-desc">Multiplies student fee</span>
                                        </div>
                                        <div class="sports-item-value">
                                            <span class="sports-calc-price" id="training-standard-total">$265</span>
                                            <div class="sports-slider-container">
                                                <input type="range" id="training-standard-days" min="1" max="5" value="1" class="sports-slider" oninput="updateTraining('standard')">
                                                <span class="sports-slider-value" id="training-standard-days-value">1 day</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Premium Training -->
                            <div class="sports-builder">
                                <div class="sports-activate">
                                    <label class="sports-activate-label">
                                        <input type="checkbox" id="training-premium-activate" onchange="toggleTraining('premium')">
                                        <span class="sports-activate-check"></span>
                                        <span class="sports-activate-text">Premium Training</span>
                                        <span class="sports-activate-price">from $475</span>
                                    </label>
                                </div>
                                <div class="sports-options" id="training-premium-options" style="display: none;">
                                    <p style="color: #aaa; font-size: 0.85rem; margin-bottom: 15px;">Full day course covering intermediate camera operation, shooting techniques & editing highlights videos</p>
                                    <div class="sports-item">
                                        <div class="sports-item-header">
                                            <span class="sports-item-name">Students</span>
                                            <span class="sports-item-desc">5 minimum</span>
                                        </div>
                                        <div class="sports-item-value">
                                            <span class="sports-calc-price" id="training-premium-students-cost">$475</span>
                                            <div class="sports-slider-container">
                                                <input type="range" id="training-premium-students" min="5" max="20" value="5" class="sports-slider" oninput="updateTraining('premium')">
                                                <span class="sports-slider-value" id="training-premium-students-value">5 students</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="sports-item">
                                        <div class="sports-item-header">
                                            <span class="sports-item-name">Days</span>
                                            <span class="sports-item-desc">Multiplies student fee</span>
                                        </div>
                                        <div class="sports-item-value">
                                            <span class="sports-calc-price" id="training-premium-total">$475</span>
                                            <div class="sports-slider-container">
                                                <input type="range" id="training-premium-days" min="1" max="5" value="1" class="sports-slider" oninput="updateTraining('premium')">
                                                <span class="sports-slider-value" id="training-premium-days-value">1 day</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Music Videos -->
                <div class="product-card" data-product="music-videos">
                    <div class="product-header" onclick="toggleProduct(this)">
                        <h2 class="product-title">Music <span>Videos</span></h2>
                        <span class="expand-icon">▼</span>
                    </div>
                    <div class="product-content">
                        <p class="product-blurb">Create a professional music video with your students. From storyboarding through to final edit, we handle the production while your students take centre stage. Perfect for choirs, bands, and performance groups.</p>
                        <div class="sports-builder">
                            <div class="sports-activate">
                                <label class="sports-activate-label">
                                    <input type="checkbox" id="musicvideo-activate" onchange="toggleMusicVideo()">
                                    <span class="sports-activate-check"></span>
                                    <span class="sports-activate-text">Music Video Package</span>
                                    <span class="sports-activate-price">from $1,425</span>
                                </label>
                            </div>
                            <div class="sports-options" id="musicvideo-options" style="display: none;">
                                <div class="sports-item">
                                    <div class="sports-item-header">
                                        <span class="sports-item-name">Base fee</span>
                                        <span class="sports-item-desc">Admin, gear rental, storyboarding & editing</span>
                                    </div>
                                    <div class="sports-item-value">
                                        <span class="sports-fixed-price">$600</span>
                                        <span class="sports-included-badge">Included</span>
                                    </div>
                                </div>
                                <div class="sports-item">
                                    <div class="sports-item-header">
                                        <span class="sports-item-name">Students</span>
                                        <span class="sports-item-desc">15-70 students</span>
                                    </div>
                                    <div class="sports-item-value">
                                        <div class="sports-slider-container">
                                            <input type="range" id="musicvideo-students" min="15" max="70" value="15" class="sports-slider" oninput="updateMusicVideo()">
                                            <span class="sports-slider-value" id="musicvideo-students-value">15 students</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="sports-item">
                                    <div class="sports-item-header">
                                        <span class="sports-item-name">Recording days</span>
                                        <span class="sports-item-desc">$25/student/day</span>
                                    </div>
                                    <div class="sports-item-value">
                                        <span class="sports-calc-price" id="musicvideo-recording-total">$375</span>
                                        <div class="sports-slider-container">
                                            <input type="range" id="musicvideo-recording" min="1" max="3" value="1" class="sports-slider" oninput="updateMusicVideo()">
                                            <span class="sports-slider-value" id="musicvideo-recording-value">1 day</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="sports-item">
                                    <div class="sports-item-header">
                                        <span class="sports-item-name">Shoot days</span>
                                        <span class="sports-item-desc">$30/student/day</span>
                                    </div>
                                    <div class="sports-item-value">
                                        <span class="sports-calc-price" id="musicvideo-shoot-total">$450</span>
                                        <div class="sports-slider-container">
                                            <input type="range" id="musicvideo-shoot" min="1" max="3" value="1" class="sports-slider" oninput="updateMusicVideo()">
                                            <span class="sports-slider-value" id="musicvideo-shoot-value">1 day</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="sports-package-total">
                                    <span>Music video total:</span>
                                    <span id="musicvideo-total">$1,425</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Summary Panel -->
            <div class="summary-panel">
                <h3 class="summary-title">Your <span>Quote</span></h3>
                
                <div class="summary-items" id="summary-items">
                    <div class="summary-empty">Select products to build your quote</div>
                </div>

                <div class="summary-totals">
                    <div class="summary-line subtotal">
                        <span>Subtotal</span>
                        <span id="subtotal-amount">$0</span>
                    </div>
                    <div class="summary-line discount" id="discount-line" style="display: none;">
                        <span id="discount-label">Multi-product discount (5%)</span>
                        <span id="discount-amount" style="color: #4ade80;">-$0</span>
                    </div>
                    <div class="summary-line discounted-subtotal" id="discounted-subtotal-line" style="display: none;">
                        <span>After discount</span>
                        <span id="discounted-subtotal-amount">$0</span>
                    </div>
                    <div class="summary-line gst">
                        <span>GST (15%)</span>
                        <span id="gst-amount">$0</span>
                    </div>
                    <div class="summary-line total">
                        <span class="total-label">Total (incl. GST)</span>
                        <span class="total-amount" id="total-amount">$0</span>
                    </div>
                </div>

                <button class="clear-btn" onclick="clearAll()">Clear All</button>

                <!-- Budget Setter -->
                <div class="budget-setter">
                    <div class="budget-header">
                        <span class="budget-label">Budget Limit</span>
                        <div class="budget-input-wrapper">
                            <span class="budget-currency">$</span>
                            <input type="number" id="budget-input" class="budget-input" placeholder="0" min="0" step="100" oninput="updateBudget()">
                        </div>
                    </div>
                    <div class="budget-gst-toggle">
                        <label class="budget-gst-label">
                            <input type="checkbox" id="budget-incl-gst" onchange="updateBudget()" checked>
                            <span class="budget-gst-check"></span>
                            <span>Including GST</span>
                        </label>
                    </div>
                    <div class="budget-progress-container" id="budget-progress-container" style="display: none;">
                        <div class="budget-progress-bar">
                            <div class="budget-progress-fill" id="budget-progress-fill"></div>
                        </div>
                        <div class="budget-progress-text">
                            <span id="budget-spent">$0</span>
                            <span id="budget-remaining">$0 remaining</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Lightbox -->
    <div class="lightbox-overlay" id="lightbox" onclick="closeLightbox(event)">
        <div class="lightbox-content" onclick="event.stopPropagation()">
            <div class="lightbox-header">
                <h3 class="lightbox-title" id="lightbox-title">Product <span>Details</span></h3>
                <button class="lightbox-close" onclick="closeLightbox()">&times;</button>
            </div>
            <div class="lightbox-price" id="lightbox-price">$0</div>
            <ul class="lightbox-details" id="lightbox-details"></ul>
        </div>
    </div>

    <script>
        // Product details for lightbox
        const productDetails = {
            'eoy-highlights': {
                'Entry': {
                    price: 850,
                    baseEvents: 0,
                    details: [
                        'You provide the footage, we craft it into a polished 2-3 minute highlights film',
                        'Delivered in time for prizegiving',
                        '1 revision'
                    ]
                },
                'Basic': {
                    price: 1750,
                    baseEvents: 4,
                    details: [
                        'We capture 4 key events in the year, blended with your own footage',
                        '3-4 minute final edit',
                        'Up to 2 revisions'
                    ]
                },
                'Standard': {
                    price: 3000,
                    baseEvents: 8,
                    details: [
                        'We capture up to 8 events across the year',
                        'Combined with any footage your staff or students contribute',
                        '4-5 minute final edit',
                        'Up to 3 revisions'
                    ]
                },
                'Premium': {
                    price: 4500,
                    baseEvents: 20,
                    details: [
                        'Comprehensive coverage across the year. We handle it all so you do not have to think about it.',
                        'Up to 20 events covered',
                        '5-6 minute final edit',
                        'Up to 5 revisions',
                        'Can still include any footage from your community'
                    ]
                }
            },
            'day-highlights': {
                'Entry': {
                    price: 500,
                    details: [
                        'Coverage of a short event, up to 1.5 hours',
                        '60 second highlights video',
                        'Perfect for smaller moments like assemblies, chapel services, or award ceremonies',
                        'Delivered within 2 weeks'
                    ]
                },
                'Basic': {
                    price: 750,
                    details: [
                        'Half day coverage, up to 3 hours',
                        '2 minute highlights video',
                        'Ideal for single-session events like sports finals or performances',
                        'Delivered within 2 weeks'
                    ]
                },
                'Standard': {
                    price: 1600,
                    details: [
                        'Full day coverage, up to 5 hours',
                        '3-4 minute highlights video',
                        'Great for bigger events, festivals, athletics/swim days, end of year celebrations',
                        'Delivered within 10 days'
                    ]
                },
                'Premium': {
                    price: 2500,
                    details: [
                        'Full day coverage, no hour limit',
                        '5-6 minute highlights video',
                        'Comprehensive coverage for your biggest events - we stay until it is done',
                        '1 social media cut (30-60 seconds, vertical format)',
                        'Delivered within 7 days'
                    ]
                }
            },
            'formal-events': {
                'Entry': {
                    price: 500,
                    details: [
                        '1 hour of coverage - ideally the highlight of the evening',
                        '1 minute highlights video',
                        'Delivered within 2 weeks'
                    ]
                },
                'Basic': {
                    price: 1100,
                    details: [
                        'Up to 2.5 hours of coverage',
                        '2 minute highlights video',
                        'Captures arrivals, venue details, and the event in full swing',
                        'Delivered within 2 weeks'
                    ]
                },
                'Standard': {
                    price: 1450,
                    details: [
                        'Up to 4 hours of coverage',
                        '3 minute highlights video',
                        'Full coverage from arrivals through to speeches or key moments',
                        'Delivered within 10 days'
                    ]
                },
                'Premium': {
                    price: 1850,
                    details: [
                        'Full event coverage',
                        '4-5 minute highlights video',
                        'Comprehensive storytelling: arrivals, details, dancing, speeches, candid moments',
                        'Delivered within 7 days'
                    ]
                }
            },
            'school-productions': {
                'recording-basic': {
                    price: 600,
                    name: 'Recording Basic',
                    details: [
                        '1 camera angle',
                        'Full show recording',
                        'Fully edited and mixed audio',
                        'Price per show'
                    ]
                },
                'recording-standard': {
                    price: 900,
                    name: 'Recording Standard',
                    details: [
                        '2 camera angles',
                        'Full show recording with cuts',
                        'Fully edited and mixed audio',
                        'Price per show'
                    ]
                },
                'recording-premium': {
                    price: 1200,
                    name: 'Recording Premium',
                    details: [
                        '3 camera angles',
                        'Full show recording with professional cuts',
                        'Fully edited and mixed audio',
                        'Price per show'
                    ]
                },
                'highlights-standard': {
                    price: 800,
                    name: 'Highlights Standard',
                    details: [
                        '2 rehearsal shoots',
                        'Coverage of 1 show & dress rehearsal',
                        '2-3 minute highlights video',
                        'Perfect for social media and promotion'
                    ]
                },
                'highlights-premium': {
                    price: 1400,
                    name: 'Highlights Premium',
                    details: [
                        '4 rehearsal shoots',
                        'Coverage of 2 shows & dress rehearsal',
                        '4-5 minute highlights video',
                        'Comprehensive coverage of the production journey'
                    ]
                },
                'documentary': {
                    price: 2000,
                    name: 'Documentary',
                    details: [
                        '7 rehearsal shoots',
                        'Tech & dress rehearsal coverage',
                        'Cast & crew interviews',
                        'Timelapses',
                        '15-20 minute video',
                        'Can include any photos or video shot by cast or crew'
                    ]
                },
                'full-package': {
                    price: 3300,
                    name: 'Full Package',
                    details: [
                        '3 products in 1 package',
                        '2 camera angle show recording',
                        'Premium Highlights video',
                        'Documentary video',
                        'Best value! Save $1000!'
                    ]
                }
            },
            'recap-website': {
                'Entry': {
                    price: 350,
                    details: [
                        'Up to 10 galleries',
                        'Basic digital yearbook website',
                        'Host your video highlights',
                        'Simple, clean design'
                    ]
                },
                'Basic': {
                    price: 450,
                    details: [
                        'Up to 15 galleries',
                        'Enhanced digital yearbook',
                        'Custom branding',
                        'Multiple video sections'
                    ]
                },
                'Standard': {
                    price: 550,
                    details: [
                        'Up to 20 galleries',
                        'Full-featured yearbook site',
                        'Custom design & branding',
                        'Unlimited video embeds',
                        'Interactive timeline'
                    ]
                },
                'Premium': {
                    price: 700,
                    details: [
                        'Unlimited galleries',
                        'Premium yearbook experience',
                        'Bespoke design',
                        'Student/staff spotlights',
                        'Archive access for future years',
                        'Priority support'
                    ]
                }
            },
            'pamphlets': {
                'Entry': {
                    price: 350,
                    details: [
                        'Basic A5 layout',
                        'No photos included',
                        'Show information & credits',
                        'Print-ready PDF'
                    ]
                },
                'Basic': {
                    price: 550,
                    details: [
                        'A5 Layout',
                        'Cast photo included',
                        'Design revisions included',
                        'Print-ready PDF'
                    ]
                },
                'Standard': {
                    price: 650,
                    details: [
                        'Cast & Show previews',
                        'Extra pages available',
                        'Custom branding',
                        'Print-ready PDF'
                    ]
                },
                'Premium': {
                    price: 850,
                    details: [
                        'Fully customisable design',
                        'Including custom shape',
                        'Unlimited revisions',
                        'Digital & print versions'
                    ]
                }
            }
        };

        // State management
        let selections = {
            'eoy-highlights': { tiers: {} },
            'day-highlights': { tiers: {} },
            'formal-events': { tiers: {} },
            'school-productions': { components: {} },
            'campaigns': { international: false, ourselves: 0, testimonials: 0 },
            'sports': { active: false, games: 5, videoMins: 1, socialCut: false },
            'arts': { active: false, events: 5, videoMins: 1, socialCut: false },
            'recap-website': { tiers: {} },
            'photography': { active: false, sessions: 0 },
            'pamphlets': { tiers: {} },
            'posters': { active: false, qty: 0, format1x1: false, format16x9: false, format9x16: false },
            'training': { entry: { active: false, students: 5, days: 1 }, basic: { active: false, students: 5, days: 1 }, standard: { active: false, students: 5, days: 1 }, premium: { active: false, students: 5, days: 1 } },
            'musicvideo': { active: false, students: 15, recordingDays: 1, shootDays: 1 }
        };

        function toggleProduct(header) {
            const card = header.closest('.product-card');
            card.classList.toggle('expanded');
        }

        function showInfo(product, tier) {
            const lightbox = document.getElementById('lightbox');
            const title = document.getElementById('lightbox-title');
            const price = document.getElementById('lightbox-price');
            const details = document.getElementById('lightbox-details');

            let info;
            let productName;

            if (product === 'school-productions') {
                info = productDetails[product][tier];
                productName = info.name;
            } else {
                info = productDetails[product][tier];
                const productNames = {
                    'eoy-highlights': 'End of Year Highlights',
                    'day-highlights': 'Day Highlights',
                    'formal-events': 'Formal Events'
                };
                productName = `${productNames[product]} – ${tier}`;
            }

            title.innerHTML = productName.replace(/(\w+)$/, '<span>$1</span>');
            price.textContent = `$${info.price.toLocaleString()}`;
            details.innerHTML = info.details.map(d => `<li>${d}</li>`).join('');

            lightbox.classList.add('active');
        }

        function closeLightbox(event) {
            if (!event || event.target === document.getElementById('lightbox')) {
                document.getElementById('lightbox').classList.remove('active');
            }
        }

        function changeTierQty(product, tierName, price, delta) {
            const qtyEl = document.getElementById(`qty-${product}-${tierName}`);
            let qty = parseInt(qtyEl.textContent) + delta;
            if (qty < 0) qty = 0;
            qtyEl.textContent = qty;

            if (qty > 0) {
                selections[product].tiers[tierName] = { price: price, quantity: qty };
            } else {
                delete selections[product].tiers[tierName];
            }

            const tierBtn = qtyEl.closest('.tier-btn');
            tierBtn.classList.toggle('selected', qty > 0);

            updateSummary();
        }

        function changeProductionQty(itemId, name, price, delta) {
            const qtyEl = document.getElementById(`qty-${itemId}`);
            let qty = parseInt(qtyEl.textContent) + delta;
            if (qty < 0) qty = 0;
            qtyEl.textContent = qty;

            if (qty > 0) {
                selections['school-productions'].components[itemId] = { name, price, quantity: qty };
            } else {
                delete selections['school-productions'].components[itemId];
            }

            qtyEl.closest('.production-option').classList.toggle('selected', qty > 0);
            updateSummary();
        }

        function updateCampaigns() {
            const international = document.getElementById('campaign-international').checked;
            const ourselvesActive = document.getElementById('campaign-ourselves-activate').checked;
            const testimonialsActive = document.getElementById('campaign-testimonials-activate').checked;
            const ourselves = ourselvesActive ? parseInt(document.getElementById('campaign-ourselves').value) : 0;
            const testimonials = testimonialsActive ? parseInt(document.getElementById('campaign-testimonials').value) : 0;

            // Update state
            selections['campaigns'] = { international, ourselves, testimonials };

            // Update display values
            document.getElementById('campaign-ourselves-value').textContent = ourselves || 1;
            document.getElementById('campaign-testimonials-value').textContent = testimonials || 1;

            // Calculate costs with discount
            const ourselvesCost = Math.round(ourselves * applyDiscount(800));
            const testimonialsCost = Math.round(testimonials * applyDiscount(150));

            document.getElementById('campaign-ourselves-total').textContent = `$${ourselvesCost.toLocaleString()}`;
            document.getElementById('campaign-testimonials-total').textContent = `$${testimonialsCost.toLocaleString()}`;

            updateSummary();
        }

        function toggleOurselvesCampaign() {
            const active = document.getElementById('campaign-ourselves-activate').checked;
            const sliderRow = document.getElementById('campaign-ourselves-slider-row');
            const priceHint = document.getElementById('campaign-ourselves-price-hint');
            
            if (active) {
                sliderRow.style.display = 'flex';
                priceHint.style.display = 'none';
                document.getElementById('campaign-ourselves').value = 1;
            } else {
                sliderRow.style.display = 'none';
                priceHint.style.display = '';
            }
            
            updateCampaigns();
        }

        function toggleTestimonialsCampaign() {
            const active = document.getElementById('campaign-testimonials-activate').checked;
            const sliderRow = document.getElementById('campaign-testimonials-slider-row');
            const priceHint = document.getElementById('campaign-testimonials-price-hint');
            
            if (active) {
                sliderRow.style.display = 'flex';
                priceHint.style.display = 'none';
                document.getElementById('campaign-testimonials').value = 1;
            } else {
                sliderRow.style.display = 'none';
                priceHint.style.display = '';
            }
            
            updateCampaigns();
        }

        function updateSports() {
            const active = document.getElementById('sports-activate').checked;
            const games = parseInt(document.getElementById('sports-games').value);
            const videoMins = parseInt(document.getElementById('sports-video').value);
            const socialCut = document.getElementById('sports-social').checked;

            // Update state
            selections['sports'] = { active, games, videoMins, socialCut };

            // Update display values
            document.getElementById('sports-games-value').textContent = `${games} game${games !== 1 ? 's' : ''}`;
            document.getElementById('sports-video-value').textContent = `${videoMins} min${videoMins !== 1 ? 's' : ''}`;

            // Calculate costs with discount
            const gamesCost = Math.round(games * applyDiscount(60));
            const videoCost = Math.round(videoMins * applyDiscount(150));

            document.getElementById('sports-games-total').textContent = `$${gamesCost}`;
            document.getElementById('sports-video-total').textContent = `$${videoCost}`;

            // Calculate total (base fee always included when active)
            let total = Math.round(applyDiscount(350)) + gamesCost + videoCost;
            if (socialCut) total += Math.round(applyDiscount(250));

            document.getElementById('sports-total').textContent = `$${total.toLocaleString()}`;

            updateSummary();
        }

        function updateArts() {
            const active = document.getElementById('arts-activate').checked;
            const events = parseInt(document.getElementById('arts-events').value);
            const videoMins = parseInt(document.getElementById('arts-video').value);
            const socialCut = document.getElementById('arts-social').checked;

            // Update state
            selections['arts'] = { active, events, videoMins, socialCut };

            // Update display values
            document.getElementById('arts-events-value').textContent = `${events} event${events !== 1 ? 's' : ''}`;
            document.getElementById('arts-video-value').textContent = `${videoMins} min${videoMins !== 1 ? 's' : ''}`;

            // Calculate costs with discount
            const eventsCost = Math.round(events * applyDiscount(70));
            const videoCost = Math.round(videoMins * applyDiscount(150));

            document.getElementById('arts-events-total').textContent = `$${eventsCost}`;
            document.getElementById('arts-video-total').textContent = `$${videoCost}`;

            // Calculate total (base fee always included when active)
            let total = Math.round(applyDiscount(350)) + eventsCost + videoCost;
            if (socialCut) total += Math.round(applyDiscount(250));

            document.getElementById('arts-total').textContent = `$${total.toLocaleString()}`;

            updateSummary();
        }

        function toggleArtsPackage() {
            const active = document.getElementById('arts-activate').checked;
            const optionsEl = document.getElementById('arts-options');

            if (active) {
                optionsEl.style.display = 'flex';
                // Set minimums
                document.getElementById('arts-events').value = 5;
                document.getElementById('arts-video').value = 1;
            } else {
                optionsEl.style.display = 'none';
                // Reset social cut when deactivating
                document.getElementById('arts-social').checked = false;
            }

            updateArts();
        }

        function toggleSportsPackage() {
            const active = document.getElementById('sports-activate').checked;
            const optionsEl = document.getElementById('sports-options');

            if (active) {
                optionsEl.style.display = 'flex';
                // Set minimums
                document.getElementById('sports-games').value = 5;
                document.getElementById('sports-video').value = 1;
            } else {
                optionsEl.style.display = 'none';
                // Reset social cut when deactivating
                document.getElementById('sports-social').checked = false;
            }

            updateSports();
        }

        // Photography functions
        function togglePhotography() {
            const active = document.getElementById('photography-activate').checked;
            const optionsEl = document.getElementById('photography-options');
            
            if (active) {
                optionsEl.style.display = 'flex';
                document.getElementById('photography-sessions').value = 1;
            } else {
                optionsEl.style.display = 'none';
            }
            
            selections['photography'].active = active;
            updatePhotography();
        }

        function updatePhotography() {
            const active = document.getElementById('photography-activate')?.checked || false;
            const sessions = parseInt(document.getElementById('photography-sessions').value);
            selections['photography'] = { active, sessions: active ? sessions : 0 };
            
            const total = Math.round(sessions * applyDiscount(150));
            document.getElementById('photography-sessions-value').textContent = `${sessions} session${sessions !== 1 ? 's' : ''}`;
            document.getElementById('photography-total').textContent = `$${total.toLocaleString()}`;
            
            updateSummary();
        }

        // Posters functions
        function togglePosters() {
            const active = document.getElementById('posters-activate').checked;
            const optionsEl = document.getElementById('posters-options');
            
            if (active) {
                optionsEl.style.display = 'flex';
                document.getElementById('posters-qty').value = 1;
                document.getElementById('posters-1x1').checked = false;
                document.getElementById('posters-16x9').checked = false;
                document.getElementById('posters-9x16').checked = false;
            } else {
                optionsEl.style.display = 'none';
            }
            
            selections['posters'].active = active;
            updatePosters();
        }

        function updatePosters() {
            const active = document.getElementById('posters-activate')?.checked || false;
            const qty = parseInt(document.getElementById('posters-qty').value);
            const format1x1 = document.getElementById('posters-1x1').checked;
            const format16x9 = document.getElementById('posters-16x9').checked;
            const format9x16 = document.getElementById('posters-9x16').checked;
            
            selections['posters'] = { active, qty: active ? qty : 0, format1x1, format16x9, format9x16 };
            
            // Calculate per-poster price with discount
            let perPoster = applyDiscount(75);
            if (format1x1) perPoster += applyDiscount(5);
            if (format16x9) perPoster += applyDiscount(5);
            if (format9x16) perPoster += applyDiscount(5);
            
            const baseTotal = Math.round(qty * applyDiscount(75));
            const total = Math.round(qty * perPoster);
            
            document.getElementById('posters-qty-value').textContent = `${qty} poster${qty !== 1 ? 's' : ''}`;
            document.getElementById('posters-base-total').textContent = `$${baseTotal}`;
            document.getElementById('posters-total').textContent = `$${total.toLocaleString()}`;
            
            updateSummary();
        }

        // Training functions
        const trainingPrices = {
            entry: { base: 125, perStudent: 20 },
            basic: { base: 175, perStudent: 20 },
            standard: { base: 265, perStudent: 20 },
            premium: { base: 475, perStudent: 20 }
        };

        function toggleTraining(tier) {
            const active = document.getElementById(`training-${tier}-activate`).checked;
            const optionsEl = document.getElementById(`training-${tier}-options`);
            
            if (active) {
                optionsEl.style.display = 'flex';
                document.getElementById(`training-${tier}-students`).value = 5;
                document.getElementById(`training-${tier}-days`).value = 1;
            } else {
                optionsEl.style.display = 'none';
            }
            
            selections['training'][tier].active = active;
            updateTraining(tier);
        }

        function updateTraining(tier) {
            const active = document.getElementById(`training-${tier}-activate`).checked;
            const students = parseInt(document.getElementById(`training-${tier}-students`).value);
            const days = parseInt(document.getElementById(`training-${tier}-days`).value);
            
            selections['training'][tier] = { active, students, days };
            
            // Calculate price with discount: (base + (students - 5) * perStudent rate) * days
            const prices = trainingPrices[tier];
            const studentsCost = Math.round(applyDiscount(prices.base + (students - 5) * prices.perStudent));
            const total = studentsCost * days;
            
            document.getElementById(`training-${tier}-students-value`).textContent = `${students} students`;
            document.getElementById(`training-${tier}-days-value`).textContent = `${days} day${days !== 1 ? 's' : ''}`;
            document.getElementById(`training-${tier}-students-cost`).textContent = `$${studentsCost.toLocaleString()}`;
            document.getElementById(`training-${tier}-total`).textContent = `$${total.toLocaleString()}`;
            
            updateSummary();
        }

        // Music Video functions
        function toggleMusicVideo() {
            const active = document.getElementById('musicvideo-activate').checked;
            const optionsEl = document.getElementById('musicvideo-options');
            
            if (active) {
                optionsEl.style.display = 'flex';
                document.getElementById('musicvideo-students').value = 15;
                document.getElementById('musicvideo-recording').value = 1;
                document.getElementById('musicvideo-shoot').value = 1;
            } else {
                optionsEl.style.display = 'none';
            }
            
            selections['musicvideo'].active = active;
            updateMusicVideo();
        }

        function updateMusicVideo() {
            const active = document.getElementById('musicvideo-activate').checked;
            const students = parseInt(document.getElementById('musicvideo-students').value);
            const recordingDays = parseInt(document.getElementById('musicvideo-recording').value);
            const shootDays = parseInt(document.getElementById('musicvideo-shoot').value);
            
            selections['musicvideo'] = { active, students, recordingDays, shootDays };
            
            // Calculate costs with discount
            const baseFee = Math.round(applyDiscount(600));
            const recordingCost = Math.round(students * recordingDays * applyDiscount(25));
            const shootCost = Math.round(students * shootDays * applyDiscount(30));
            const total = baseFee + recordingCost + shootCost;
            
            document.getElementById('musicvideo-students-value').textContent = `${students} students`;
            document.getElementById('musicvideo-recording-value').textContent = `${recordingDays} day${recordingDays !== 1 ? 's' : ''}`;
            document.getElementById('musicvideo-shoot-value').textContent = `${shootDays} day${shootDays !== 1 ? 's' : ''}`;
            document.getElementById('musicvideo-recording-total').textContent = `$${recordingCost.toLocaleString()}`;
            document.getElementById('musicvideo-shoot-total').textContent = `$${shootCost.toLocaleString()}`;
            document.getElementById('musicvideo-total').textContent = `$${total.toLocaleString()}`;
            
            updateSummary();
        }

        function countBonusEvents() {
            let count = 0;

            // Day Highlights - each one adds a bonus event
            Object.values(selections['day-highlights'].tiers).forEach(tier => {
                count += tier.quantity;
            });

            // Formal Events - each one adds a bonus event
            Object.values(selections['formal-events'].tiers).forEach(tier => {
                count += tier.quantity;
            });

            // School Productions - each item adds a bonus event
            Object.values(selections['school-productions'].components).forEach(comp => {
                count += comp.quantity;
            });

            // Campaigns - counts as 1 if any items selected
            const campSel = selections['campaigns'];
            if (campSel.international || campSel.ourselves > 0 || campSel.testimonials > 0) {
                count += 1;
            }

            return count;
        }

        function updateSummary() {
            const summaryItems = document.getElementById('summary-items');
            const subtotalEl = document.getElementById('subtotal-amount');
            const gstEl = document.getElementById('gst-amount');
            const totalEl = document.getElementById('total-amount');

            let html = '';
            let subtotal = 0;
            let hasItems = false;
            const bonusEvents = countBonusEvents();

            const productNames = {
                'eoy-highlights': 'End of Year Highlights',
                'day-highlights': 'Day Highlights',
                'formal-events': 'Formal Events'
            };

            // EOY Highlights with events tracking
            const eoyTiers = Object.entries(selections['eoy-highlights'].tiers);
            if (eoyTiers.length > 0) {
                hasItems = true;
                eoyTiers.forEach(([tierName, tierData]) => {
                    const itemTotal = tierData.price * tierData.quantity;
                    subtotal += itemTotal;

                    const baseEvents = productDetails['eoy-highlights'][tierName].baseEvents;
                    const totalEvents = baseEvents + bonusEvents;

                    const qtyText = tierData.quantity > 1 ? ` × ${tierData.quantity}` : '';

                    html += `
                        <div class="summary-item">
                            <div class="summary-item-details">
                                <div class="summary-item-name">${productNames['eoy-highlights']}</div>
                                <div class="summary-item-tier">${tierName}${qtyText}</div>
                                ${totalEvents > 0 ? `<div class="summary-item-events">${totalEvents} events included</div>` : ''}
                            </div>
                            <span class="summary-item-price">$${itemTotal.toLocaleString()}</span>
                            <button class="summary-item-remove" onclick="removeTier('eoy-highlights', '${tierName}')">×</button>
                        </div>
                    `;
                });
            }

            // Other standard products
            ['day-highlights', 'formal-events'].forEach(product => {
                const tierEntries = Object.entries(selections[product].tiers);
                if (tierEntries.length > 0) {
                    hasItems = true;
                    tierEntries.forEach(([tierName, tierData]) => {
                        const itemTotal = tierData.price * tierData.quantity;
                        subtotal += itemTotal;
                        const qtyText = tierData.quantity > 1 ? ` × ${tierData.quantity}` : '';

                        html += `
                            <div class="summary-item">
                                <div class="summary-item-details">
                                    <div class="summary-item-name">${productNames[product]}</div>
                                    <div class="summary-item-tier">${tierName}${qtyText}</div>
                                </div>
                                <span class="summary-item-price">$${itemTotal.toLocaleString()}</span>
                                <button class="summary-item-remove" onclick="removeTier('${product}', '${tierName}')">×</button>
                            </div>
                        `;
                    });
                }
            });

            // School Productions
            const prodEntries = Object.entries(selections['school-productions'].components);
            if (prodEntries.length > 0) {
                hasItems = true;
                prodEntries.forEach(([itemId, data]) => {
                    const itemTotal = data.price * data.quantity;
                    subtotal += itemTotal;
                    const qtyText = data.quantity > 1 ? ` × ${data.quantity}` : '';

                    html += `
                        <div class="summary-item">
                            <div class="summary-item-details">
                                <div class="summary-item-name">School Productions</div>
                                <div class="summary-item-tier">${data.name}${qtyText}</div>
                            </div>
                            <span class="summary-item-price">$${itemTotal.toLocaleString()}</span>
                            <button class="summary-item-remove" onclick="removeProduction('${itemId}')">×</button>
                        </div>
                    `;
                });
            }

            // Campaigns
            const campSel = selections['campaigns'];
            const hasCampaigns = campSel.international || campSel.ourselves > 0 || campSel.testimonials > 0;
            if (hasCampaigns) {
                hasItems = true;
                let campTotal = 0;
                const campItems = [];

                if (campSel.international) {
                    campTotal += 3500;
                    campItems.push('International Campaign');
                }
                if (campSel.ourselves > 0) {
                    campTotal += campSel.ourselves * 800;
                    campItems.push(`Introducing Ourselves ×${campSel.ourselves}`);
                }
                if (campSel.testimonials > 0) {
                    campTotal += campSel.testimonials * 150;
                    campItems.push(`Testimonials ×${campSel.testimonials}`);
                }

                subtotal += campTotal;

                html += `
                    <div class="summary-item">
                        <div class="summary-item-details">
                            <div class="summary-item-name">Advertising & Campaigns</div>
                            <div class="summary-item-tier" style="font-size: 0.75rem;">${campItems.join(', ')}</div>
                        </div>
                        <span class="summary-item-price">$${campTotal.toLocaleString()}</span>
                        <button class="summary-item-remove" onclick="removeProduct('campaigns')">×</button>
                    </div>
                `;
            }

            // Sports
            const sportsSel = selections['sports'];
            if (sportsSel.active) {
                hasItems = true;
                let sportsTotal = 350; // base fee always included
                sportsTotal += sportsSel.games * 60;
                sportsTotal += sportsSel.videoMins * 150;
                if (sportsSel.socialCut) sportsTotal += 250;

                subtotal += sportsTotal;

                const sportsDetails = [];
                sportsDetails.push(`${sportsSel.games} games`);
                sportsDetails.push(`${sportsSel.videoMins} min video`);
                if (sportsSel.socialCut) sportsDetails.push('+ social cut');

                html += `
                    <div class="summary-item">
                        <div class="summary-item-details">
                            <div class="summary-item-name">Sports Highlights</div>
                            <div class="summary-item-tier" style="font-size: 0.75rem;">${sportsDetails.join(', ')}</div>
                        </div>
                        <span class="summary-item-price">$${sportsTotal.toLocaleString()}</span>
                        <button class="summary-item-remove" onclick="removeProduct('sports')">×</button>
                    </div>
                `;
            }

            // Arts
            const artsSel = selections['arts'];
            if (artsSel.active) {
                hasItems = true;
                let artsTotal = 350; // base fee always included
                artsTotal += artsSel.events * 70;
                artsTotal += artsSel.videoMins * 150;
                if (artsSel.socialCut) artsTotal += 250;

                subtotal += artsTotal;

                const artsDetails = [];
                artsDetails.push(`${artsSel.events} events`);
                artsDetails.push(`${artsSel.videoMins} min video`);
                if (artsSel.socialCut) artsDetails.push('+ social cut');

                html += `
                    <div class="summary-item">
                        <div class="summary-item-details">
                            <div class="summary-item-name">Arts Highlights</div>
                            <div class="summary-item-tier" style="font-size: 0.75rem;">${artsDetails.join(', ')}</div>
                        </div>
                        <span class="summary-item-price">$${artsTotal.toLocaleString()}</span>
                        <button class="summary-item-remove" onclick="removeProduct('arts')">×</button>
                    </div>
                `;
            }

            // Recap Website
            const recapEntries = Object.entries(selections['recap-website'].tiers);
            if (recapEntries.length > 0) {
                hasItems = true;
                recapEntries.forEach(([tierName, tierData]) => {
                    const itemTotal = tierData.price * tierData.quantity;
                    subtotal += itemTotal;
                    const qtyText = tierData.quantity > 1 ? ` × ${tierData.quantity}` : '';

                    html += `
                        <div class="summary-item">
                            <div class="summary-item-details">
                                <div class="summary-item-name">Recap Website</div>
                                <div class="summary-item-tier">${tierName}${qtyText}</div>
                            </div>
                            <span class="summary-item-price">$${itemTotal.toLocaleString()}</span>
                            <button class="summary-item-remove" onclick="removeTier('recap-website', '${tierName}')">×</button>
                        </div>
                    `;
                });
            }

            // Photography
            if (selections['photography'].active) {
                hasItems = true;
                const photoTotal = selections['photography'].sessions * 150;
                subtotal += photoTotal;

                html += `
                    <div class="summary-item">
                        <div class="summary-item-details">
                            <div class="summary-item-name">Event Photography</div>
                            <div class="summary-item-tier">${selections['photography'].sessions} session${selections['photography'].sessions !== 1 ? 's' : ''}</div>
                        </div>
                        <span class="summary-item-price">$${photoTotal.toLocaleString()}</span>
                        <button class="summary-item-remove" onclick="removeProduct('photography')">×</button>
                    </div>
                `;
            }

            // Pamphlets
            const pamphletEntries = Object.entries(selections['pamphlets'].tiers);
            if (pamphletEntries.length > 0) {
                hasItems = true;
                pamphletEntries.forEach(([tierName, tierData]) => {
                    const itemTotal = tierData.price * tierData.quantity;
                    subtotal += itemTotal;
                    const qtyText = tierData.quantity > 1 ? ` × ${tierData.quantity}` : '';

                    html += `
                        <div class="summary-item">
                            <div class="summary-item-details">
                                <div class="summary-item-name">Production Pamphlets</div>
                                <div class="summary-item-tier">${tierName}${qtyText}</div>
                            </div>
                            <span class="summary-item-price">$${itemTotal.toLocaleString()}</span>
                            <button class="summary-item-remove" onclick="removeTier('pamphlets', '${tierName}')">×</button>
                        </div>
                    `;
                });
            }

            // Posters
            if (selections['posters'].active) {
                hasItems = true;
                let perPoster = 75;
                if (selections['posters'].format1x1) perPoster += 5;
                if (selections['posters'].format16x9) perPoster += 5;
                if (selections['posters'].format9x16) perPoster += 5;
                const posterTotal = selections['posters'].qty * perPoster;
                subtotal += posterTotal;

                const formats = [];
                formats.push('A3');
                if (selections['posters'].format1x1) formats.push('1×1');
                if (selections['posters'].format16x9) formats.push('16×9');
                if (selections['posters'].format9x16) formats.push('9×16');

                html += `
                    <div class="summary-item">
                        <div class="summary-item-details">
                            <div class="summary-item-name">Advertising Posters</div>
                            <div class="summary-item-tier">${selections['posters'].qty} poster${selections['posters'].qty !== 1 ? 's' : ''} (${formats.join(', ')})</div>
                        </div>
                        <span class="summary-item-price">$${posterTotal.toLocaleString()}</span>
                        <button class="summary-item-remove" onclick="removeProduct('posters')">×</button>
                    </div>
                `;
            }

            // Training
            ['entry', 'basic', 'standard', 'premium'].forEach(tier => {
                if (selections['training'][tier].active) {
                    hasItems = true;
                    const students = selections['training'][tier].students;
                    const days = selections['training'][tier].days || 1;
                    const prices = trainingPrices[tier];
                    const studentsCost = prices.base + (students - 5) * prices.perStudent;
                    const total = studentsCost * days;
                    subtotal += total;

                    const tierName = tier.charAt(0).toUpperCase() + tier.slice(1);
                    html += `
                        <div class="summary-item">
                            <div class="summary-item-details">
                                <div class="summary-item-name">Student Training</div>
                                <div class="summary-item-tier">${tierName} (${students} students × ${days} day${days !== 1 ? 's' : ''})</div>
                            </div>
                            <span class="summary-item-price">$${total.toLocaleString()}</span>
                            <button class="summary-item-remove" onclick="removeProduct('training-${tier}')">×</button>
                        </div>
                    `;
                }
            });

            // Music Video
            if (selections['musicvideo'].active) {
                hasItems = true;
                const mv = selections['musicvideo'];
                const mvTotal = 600 + (mv.students * mv.recordingDays * 25) + (mv.students * mv.shootDays * 30);
                subtotal += mvTotal;

                html += `
                    <div class="summary-item">
                        <div class="summary-item-details">
                            <div class="summary-item-name">Music Video</div>
                            <div class="summary-item-tier">${mv.students} students, ${mv.recordingDays} rec day${mv.recordingDays !== 1 ? 's' : ''}, ${mv.shootDays} shoot day${mv.shootDays !== 1 ? 's' : ''}</div>
                        </div>
                        <span class="summary-item-price">$${mvTotal.toLocaleString()}</span>
                        <button class="summary-item-remove" onclick="removeProduct('musicvideo')">×</button>
                    </div>
                `;
            }

            if (!hasItems) {
                html = '<div class="summary-empty">Select products to build your quote</div>';
            }

            // Calculate discountable product count
            let discountableCount = 0;
            let discountableSubtotal = 0;

            // Count EOY Highlights
            Object.values(selections['eoy-highlights'].tiers).forEach(tier => {
                discountableCount += tier.quantity;
                discountableSubtotal += tier.price * tier.quantity;
            });

            // Count Day Highlights
            Object.values(selections['day-highlights'].tiers).forEach(tier => {
                discountableCount += tier.quantity;
                discountableSubtotal += tier.price * tier.quantity;
            });

            // Count Formal Events
            Object.values(selections['formal-events'].tiers).forEach(tier => {
                discountableCount += tier.quantity;
                discountableSubtotal += tier.price * tier.quantity;
            });

            // Count School Productions
            Object.values(selections['school-productions'].components).forEach(comp => {
                discountableCount += comp.quantity;
                discountableSubtotal += comp.price * comp.quantity;
            });

            // Count Sports (counts as 1 discountable product if active)
            if (selections['sports'].active) {
                discountableCount += 1;
                let sportsSubtotal = 350;
                sportsSubtotal += selections['sports'].games * 60;
                sportsSubtotal += selections['sports'].videoMins * 150;
                if (selections['sports'].socialCut) sportsSubtotal += 250;
                discountableSubtotal += sportsSubtotal;
            }

            // Count Arts (counts as 1 discountable product if active)
            if (selections['arts'].active) {
                discountableCount += 1;
                let artsSubtotal = 350;
                artsSubtotal += selections['arts'].events * 70;
                artsSubtotal += selections['arts'].videoMins * 150;
                if (selections['arts'].socialCut) artsSubtotal += 250;
                discountableSubtotal += artsSubtotal;
            }

            // Count Recap Website
            Object.values(selections['recap-website'].tiers).forEach(tier => {
                discountableCount += tier.quantity;
                discountableSubtotal += tier.price * tier.quantity;
            });

            // Count Photography (counts as 1 if any sessions)
            if (selections['photography'].active) {
                discountableCount += 1;
                discountableSubtotal += selections['photography'].sessions * 150;
            }

            // Count Pamphlets
            Object.values(selections['pamphlets'].tiers).forEach(tier => {
                discountableCount += tier.quantity;
                discountableSubtotal += tier.price * tier.quantity;
            });

            // Count Posters (counts as 1 if any)
            if (selections['posters'].active) {
                discountableCount += 1;
                let perPoster = 75;
                if (selections['posters'].format1x1) perPoster += 5;
                if (selections['posters'].format16x9) perPoster += 5;
                if (selections['posters'].format9x16) perPoster += 5;
                discountableSubtotal += selections['posters'].qty * perPoster;
            }

            // Count Training (each tier counts as 1)
            ['entry', 'basic', 'standard', 'premium'].forEach(tier => {
                if (selections['training'][tier].active) {
                    discountableCount += 1;
                    const students = selections['training'][tier].students;
                    const prices = trainingPrices[tier];
                    discountableSubtotal += prices.base + (students - 5) * prices.perStudent;
                }
            });

            // Count Music Video (counts as 1 if active)
            if (selections['musicvideo'].active) {
                discountableCount += 1;
                const mv = selections['musicvideo'];
                discountableSubtotal += 600 + (mv.students * mv.recordingDays * 25) + (mv.students * mv.shootDays * 30);
            }

            // Count Campaigns (each counts as 1)
            const campSel2 = selections['campaigns'];
            if (campSel2.international) {
                discountableCount += 1;
                discountableSubtotal += 3500;
            }
            if (campSel2.ourselves > 0) {
                discountableCount += 1;
                discountableSubtotal += campSel2.ourselves * 800;
            }
            if (campSel2.testimonials > 0) {
                discountableCount += 1;
                discountableSubtotal += campSel2.testimonials * 150;
            }

            // Determine discount percentage
            // 3 projects - 5%, 6 projects - 8%, 12 projects - 12%, 20 projects - 15%
            let discountPercent = 0;
            if (discountableCount >= 30) {
                discountPercent = 20;
            } else if (discountableCount >= 20) {
                discountPercent = 15;
            } else if (discountableCount >= 12) {
                discountPercent = 12;
            } else if (discountableCount >= 6) {
                discountPercent = 8;
            } else if (discountableCount >= 3) {
                discountPercent = 5;
            }

            const discountAmount = discountableSubtotal * (discountPercent / 100);
            const discountedSubtotal = discountableSubtotal - discountAmount;
            const gst = discountedSubtotal * 0.15;
            const total = discountedSubtotal + gst;

            // Update discount line visibility
            const discountLine = document.getElementById('discount-line');
            const discountLabel = document.getElementById('discount-label');
            const discountAmountEl = document.getElementById('discount-amount');
            const discountedSubtotalLine = document.getElementById('discounted-subtotal-line');
            const discountedSubtotalAmount = document.getElementById('discounted-subtotal-amount');

            if (discountPercent > 0) {
                discountLine.style.display = 'flex';
                discountLabel.textContent = `Multi-product discount (${discountPercent}%)`;
                discountAmountEl.textContent = `-$${discountAmount.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
                discountedSubtotalLine.style.display = 'flex';
                discountedSubtotalAmount.textContent = `$${discountedSubtotal.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
            } else {
                discountLine.style.display = 'none';
                discountedSubtotalLine.style.display = 'none';
            }

            summaryItems.innerHTML = html;
            subtotalEl.textContent = `$${subtotal.toLocaleString()}`;
            gstEl.textContent = `$${gst.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
            totalEl.textContent = `$${total.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;

            // Update all prices with discount
            updateAllPricesWithDiscount(discountPercent);

            // Update budget display
            updateBudgetDisplay(total);
        }

        // Store original prices for reference (must match productDetails and HTML)
        const originalPrices = {
            tiers: {
                'eoy-highlights': { 'Entry': 850, 'Basic': 1750, 'Standard': 3000, 'Premium': 4500 },
                'day-highlights': { 'Entry': 500, 'Basic': 750, 'Standard': 1600, 'Premium': 2500 },
                'formal-events': { 'Entry': 500, 'Basic': 1100, 'Standard': 1450, 'Premium': 1850 },
                'recap-website': { 'Entry': 350, 'Basic': 450, 'Standard': 550, 'Premium': 700 },
                'pamphlets': { 'Entry': 350, 'Basic': 550, 'Standard': 650, 'Premium': 850 }
            },
            productions: {
                'recording-basic': 600,
                'recording-standard': 900,
                'recording-premium': 1200,
                'highlights-standard': 800,
                'highlights-premium': 1400,
                'documentary': 2000,
                'full-package': 3300
            },
            perUnit: {
                'sports-game': 60,
                'sports-video': 150,
                'sports-social': 250,
                'sports-base': 350,
                'arts-event': 70,
                'arts-video': 150,
                'arts-social': 250,
                'arts-base': 350,
                'photography': 150,
                'posters-base': 75,
                'posters-1x1': 5,
                'posters-16x9': 5,
                'posters-9x16': 5,
                'musicvideo-base': 600,
                'musicvideo-recording': 25,
                'musicvideo-shoot': 30
            },
            campaigns: {
                'international': 3500,
                'ourselves': 800,
                'testimonials': 150
            },
            training: {
                'entry': { base: 100, perStudent: 15 },
                'basic': { base: 150, perStudent: 20 },
                'standard': { base: 200, perStudent: 25 },
                'premium': { base: 400, perStudent: 35 }
            }
        };

        let currentDiscountPercent = 0;

        function applyDiscount(price) {
            if (currentDiscountPercent === 0) return price;
            return price * (1 - currentDiscountPercent / 100);
        }

        function updateAllPricesWithDiscount(discountPercent) {
            currentDiscountPercent = discountPercent;

            // Only update display prices if there's actually a discount
            // When discount is 0, prices should show original values
            
            // Update tier buttons
            Object.entries(originalPrices.tiers).forEach(([product, tiers]) => {
                Object.entries(tiers).forEach(([tierName, originalPrice]) => {
                    const tierBtn = document.querySelector(`[data-product="${product}"][data-tier="${tierName}"]`);
                    if (!tierBtn) return;
                    const priceEl = tierBtn.querySelector('.tier-price');
                    if (!priceEl) return;
                    
                    if (discountPercent > 0) {
                        const newPrice = Math.round(applyDiscount(originalPrice));
                        priceEl.textContent = `$${newPrice.toLocaleString()}`;
                    } else {
                        priceEl.textContent = `$${originalPrice.toLocaleString()}`;
                    }
                });
            });

            // Update production options
            const productionPriceFormats = {
                'recording-basic': '1 camera · $PRICE/show',
                'recording-standard': '2 cameras · $PRICE/show',
                'recording-premium': '3 cameras · $PRICE/show',
                'highlights-standard': '2 min · $PRICE',
                'highlights-premium': '4-5 min · $PRICE',
                'documentary': '15-20 min · $PRICE',
                'full-package': 'All included · $PRICE'
            };
            
            Object.entries(originalPrices.productions).forEach(([id, originalPrice]) => {
                const priceEl = document.querySelector(`#qty-${id}`)?.closest('.production-option')?.querySelector('.production-option-price');
                if (priceEl && productionPriceFormats[id]) {
                    const price = discountPercent > 0 ? Math.round(applyDiscount(originalPrice)) : originalPrice;
                    priceEl.textContent = productionPriceFormats[id].replace('$PRICE', `$${price.toLocaleString()}`);
                }
            });

            // Update sports prices
            const sportsGameDesc = document.querySelector('#sports-games')?.closest('.sports-item')?.querySelector('.sports-item-desc');
            const sportsVideoDesc = document.querySelector('#sports-video')?.closest('.sports-item')?.querySelector('.sports-item-desc');
            const sportsSocialPrice = document.querySelector('#sports-social')?.closest('.sports-item')?.querySelector('.sports-fixed-price');
            const sportsBasePrice = document.querySelector('#sports-options .sports-item:first-child .sports-fixed-price');
            
            if (sportsGameDesc) sportsGameDesc.textContent = `$${Math.round(applyDiscount(60))}/game`;
            if (sportsVideoDesc) sportsVideoDesc.textContent = `$${Math.round(applyDiscount(150))}/minute`;
            if (sportsSocialPrice) sportsSocialPrice.textContent = `$${Math.round(applyDiscount(250))}`;
            if (sportsBasePrice) sportsBasePrice.textContent = `$${Math.round(applyDiscount(350))}`;

            // Update arts prices
            const artsEventDesc = document.querySelector('#arts-events')?.closest('.sports-item')?.querySelector('.sports-item-desc');
            const artsVideoDesc = document.querySelector('#arts-video')?.closest('.sports-item')?.querySelector('.sports-item-desc');
            const artsSocialPrice = document.querySelector('#arts-social')?.closest('.sports-item')?.querySelector('.sports-fixed-price');
            const artsBasePrice = document.querySelector('#arts-options .sports-item:first-child .sports-fixed-price');
            
            if (artsEventDesc) artsEventDesc.textContent = `$${Math.round(applyDiscount(70))}/event`;
            if (artsVideoDesc) artsVideoDesc.textContent = `$${Math.round(applyDiscount(150))}/minute`;
            if (artsSocialPrice) artsSocialPrice.textContent = `$${Math.round(applyDiscount(250))}`;
            if (artsBasePrice) artsBasePrice.textContent = `$${Math.round(applyDiscount(350))}`;

            // Update photography price
            const photoDesc = document.querySelector('#photography-sessions')?.closest('.sports-item')?.querySelector('.sports-item-desc');
            if (photoDesc) photoDesc.textContent = `$${Math.round(applyDiscount(150))}/session (1hr shoot + 1hr edit)`;

            // Update poster prices
            const posterDesc = document.querySelector('#posters-qty')?.closest('.sports-item')?.querySelector('.sports-item-desc');
            if (posterDesc) posterDesc.textContent = `$${Math.round(applyDiscount(75))}/poster (A3 design included)`;
            
            // Update poster addon prices
            document.querySelectorAll('#posters-1x1, #posters-16x9, #posters-9x16').forEach(checkbox => {
                const desc = checkbox.closest('.sports-item')?.querySelector('.sports-item-desc');
                if (desc) desc.textContent = `+$${Math.round(applyDiscount(5))}/poster`;
            });

            // Update training prices
            ['entry', 'basic', 'standard', 'premium'].forEach(tier => {
                const activatePrice = document.querySelector(`#training-${tier}-activate`)?.closest('.sports-activate-label')?.querySelector('.sports-activate-price');
                if (activatePrice) {
                    const basePrice = originalPrices.training[tier].base;
                    activatePrice.textContent = `from $${Math.round(applyDiscount(basePrice))}`;
                }
            });

            // Update music video prices
            const mvBasePrice = document.querySelector('#musicvideo-options .sports-item:first-child .sports-fixed-price');
            const mvRecordingDesc = document.querySelector('#musicvideo-recording')?.closest('.sports-item')?.querySelector('.sports-item-desc');
            const mvShootDesc = document.querySelector('#musicvideo-shoot')?.closest('.sports-item')?.querySelector('.sports-item-desc');
            
            if (mvBasePrice) mvBasePrice.textContent = `$${Math.round(applyDiscount(600))}`;
            if (mvRecordingDesc) mvRecordingDesc.textContent = `$${Math.round(applyDiscount(25))}/student/day`;
            if (mvShootDesc) mvShootDesc.textContent = `$${Math.round(applyDiscount(30))}/student/day`;

            // Update campaign prices with discount
            const intlPriceEl = document.querySelector('#campaign-international')?.closest('.campaign-offer')?.querySelector('.campaign-offer-price');
            if (intlPriceEl) {
                const price = discountPercent > 0 ? Math.round(applyDiscount(3500)) : 3500;
                intlPriceEl.textContent = `$${price.toLocaleString()}`;
            }
            
            const ourselvesPriceHint = document.getElementById('campaign-ourselves-price-hint');
            const ourselvesUnit = document.querySelector('#campaign-ourselves-slider-row .campaign-slider-unit');
            if (ourselvesPriceHint) {
                const price = discountPercent > 0 ? Math.round(applyDiscount(800)) : 800;
                ourselvesPriceHint.textContent = `from $${price.toLocaleString()}`;
            }
            if (ourselvesUnit) {
                const price = discountPercent > 0 ? Math.round(applyDiscount(800)) : 800;
                ourselvesUnit.textContent = `$${price}/video`;
            }
            
            const testimonialsPriceHint = document.getElementById('campaign-testimonials-price-hint');
            const testimonialsUnit = document.querySelector('#campaign-testimonials-slider-row .campaign-slider-unit');
            if (testimonialsPriceHint) {
                const price = discountPercent > 0 ? Math.round(applyDiscount(150)) : 150;
                testimonialsPriceHint.textContent = `from $${price.toLocaleString()}`;
            }
            if (testimonialsUnit) {
                const price = discountPercent > 0 ? Math.round(applyDiscount(150)) : 150;
                testimonialsUnit.textContent = `$${price}/interview`;
            }

            // Update sports/arts package "from" prices
            const sportsFromPrice = document.querySelector('#sports-activate')?.closest('.sports-activate-label')?.querySelector('.sports-activate-price');
            const artsFromPrice = document.querySelector('#arts-activate')?.closest('.sports-activate-label')?.querySelector('.sports-activate-price');
            const mvFromPrice = document.querySelector('#musicvideo-activate')?.closest('.sports-activate-label')?.querySelector('.sports-activate-price');
            
            if (sportsFromPrice) {
                const minSports = Math.round(applyDiscount(350 + 300 + 150));
                sportsFromPrice.textContent = `from $${minSports.toLocaleString()}`;
            }
            if (artsFromPrice) {
                const minArts = Math.round(applyDiscount(350 + 350 + 150));
                artsFromPrice.textContent = `from $${minArts.toLocaleString()}`;
            }
            if (mvFromPrice) {
                const minMv = Math.round(applyDiscount(600 + 375 + 450));
                mvFromPrice.textContent = `from $${minMv.toLocaleString()}`;
            }

            // Update displayed totals for active packages (without triggering updateSummary again)
            updatePackageTotalsDisplay();
        }

        // Update package total displays without calling updateSummary (prevents infinite loop)
        function updatePackageTotalsDisplay() {
            // Sports
            if (selections['sports'].active) {
                const games = selections['sports'].games;
                const videoMins = selections['sports'].videoMins;
                const socialCut = selections['sports'].socialCut;
                const gamesCost = Math.round(games * applyDiscount(60));
                const videoCost = Math.round(videoMins * applyDiscount(150));
                let total = Math.round(applyDiscount(350)) + gamesCost + videoCost;
                if (socialCut) total += Math.round(applyDiscount(250));
                document.getElementById('sports-games-total').textContent = `$${gamesCost}`;
                document.getElementById('sports-video-total').textContent = `$${videoCost}`;
                document.getElementById('sports-total').textContent = `$${total.toLocaleString()}`;
            }

            // Arts
            if (selections['arts'].active) {
                const events = selections['arts'].events;
                const videoMins = selections['arts'].videoMins;
                const socialCut = selections['arts'].socialCut;
                const eventsCost = Math.round(events * applyDiscount(70));
                const videoCost = Math.round(videoMins * applyDiscount(150));
                let total = Math.round(applyDiscount(350)) + eventsCost + videoCost;
                if (socialCut) total += Math.round(applyDiscount(250));
                document.getElementById('arts-events-total').textContent = `$${eventsCost}`;
                document.getElementById('arts-video-total').textContent = `$${videoCost}`;
                document.getElementById('arts-total').textContent = `$${total.toLocaleString()}`;
            }

            // Photography
            if (selections['photography'].active) {
                const total = Math.round(selections['photography'].sessions * applyDiscount(150));
                document.getElementById('photography-total').textContent = `$${total.toLocaleString()}`;
            }

            // Posters
            if (selections['posters'].active) {
                const qty = selections['posters'].qty;
                let perPoster = applyDiscount(75);
                if (selections['posters'].format1x1) perPoster += applyDiscount(5);
                if (selections['posters'].format16x9) perPoster += applyDiscount(5);
                if (selections['posters'].format9x16) perPoster += applyDiscount(5);
                const baseTotal = Math.round(qty * applyDiscount(75));
                const total = Math.round(qty * perPoster);
                document.getElementById('posters-base-total').textContent = `$${baseTotal}`;
                document.getElementById('posters-total').textContent = `$${total.toLocaleString()}`;
            }

            // Training
            ['entry', 'basic', 'standard', 'premium'].forEach(tier => {
                if (selections['training'][tier].active) {
                    const students = selections['training'][tier].students;
                    const days = selections['training'][tier].days || 1;
                    const prices = trainingPrices[tier];
                    const studentsCost = Math.round(applyDiscount(prices.base + (students - 5) * prices.perStudent));
                    const total = studentsCost * days;
                    document.getElementById(`training-${tier}-students-cost`).textContent = `$${studentsCost.toLocaleString()}`;
                    document.getElementById(`training-${tier}-total`).textContent = `$${total.toLocaleString()}`;
                }
            });

            // Music Video
            if (selections['musicvideo'].active) {
                const mv = selections['musicvideo'];
                const baseFee = Math.round(applyDiscount(600));
                const recordingCost = Math.round(mv.students * mv.recordingDays * applyDiscount(25));
                const shootCost = Math.round(mv.students * mv.shootDays * applyDiscount(30));
                const total = baseFee + recordingCost + shootCost;
                document.getElementById('musicvideo-recording-total').textContent = `$${recordingCost.toLocaleString()}`;
                document.getElementById('musicvideo-shoot-total').textContent = `$${shootCost.toLocaleString()}`;
                document.getElementById('musicvideo-total').textContent = `$${total.toLocaleString()}`;
            }
        }

        function updateBudget() {
            updateBudgetDisplay(getCurrentTotal());
        }

        function getCurrentTotal() {
            const totalText = document.getElementById('total-amount').textContent;
            return parseFloat(totalText.replace(/[$,]/g, '')) || 0;
        }

        function getSubtotalAfterDiscount() {
            // First check if discounted subtotal line is visible
            const discountedLine = document.getElementById('discounted-subtotal-line');
            if (discountedLine && discountedLine.style.display !== 'none') {
                const subtotalText = document.getElementById('discounted-subtotal-amount').textContent;
                const value = parseFloat(subtotalText.replace(/[$,]/g, ''));
                if (!isNaN(value) && value > 0) {
                    return value;
                }
            }
            // If no discount or not visible, use regular subtotal
            const regularSubtotal = document.getElementById('subtotal-amount').textContent;
            return parseFloat(regularSubtotal.replace(/[$,]/g, '')) || 0;
        }

        function updateBudgetDisplay(currentTotal) {
            const budgetInput = document.getElementById('budget-input');
            const budgetInclGst = document.getElementById('budget-incl-gst').checked;
            const budgetContainer = document.getElementById('budget-progress-container');
            const budgetFill = document.getElementById('budget-progress-fill');
            const budgetSpent = document.getElementById('budget-spent');
            const budgetRemaining = document.getElementById('budget-remaining');

            const budget = parseFloat(budgetInput.value) || 0;

            // If no budget set or cart is empty, hide and clear
            if (budget <= 0) {
                budgetContainer.style.display = 'none';
                clearBudgetRestrictions();
                return;
            }

            // If cart is empty, show 0 spent
            if (currentTotal === 0) {
                budgetContainer.style.display = 'block';
                budgetFill.style.width = '0%';
                budgetFill.classList.remove('warning', 'danger');
                budgetSpent.textContent = '$0.00';
                budgetRemaining.textContent = `$${budget.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})} remaining`;
                budgetRemaining.style.color = '#888';
                clearBudgetRestrictions();
                // Still apply budget restrictions for what can be added
                applyBudgetRestrictions(budget, budget, budgetInclGst);
                return;
            }

            budgetContainer.style.display = 'block';
            
            // Compare against the right value based on GST toggle
            let compareValue;
            if (budgetInclGst) {
                compareValue = currentTotal; // Total including GST
            } else {
                compareValue = getSubtotalAfterDiscount(); // Subtotal excluding GST
            }

            const percentage = Math.min((compareValue / budget) * 100, 100);
            const remaining = budget - compareValue;

            budgetFill.style.width = `${percentage}%`;
            budgetFill.classList.remove('warning', 'danger');
            if (percentage >= 100) {
                budgetFill.classList.add('danger');
            } else if (percentage >= 80) {
                budgetFill.classList.add('warning');
            }

            budgetSpent.textContent = `$${compareValue.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
            
            if (remaining >= 0) {
                budgetRemaining.textContent = `$${remaining.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})} remaining`;
                budgetRemaining.style.color = '#888';
            } else {
                budgetRemaining.textContent = `$${Math.abs(remaining).toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})} over`;
                budgetRemaining.style.color = '#ef4444';
            }

            // Apply budget restrictions to products
            applyBudgetRestrictions(budget, remaining, budgetInclGst);
        }

        function applyBudgetRestrictions(budget, remaining, inclGst) {
            // Check tier buttons
            Object.entries(originalPrices.tiers).forEach(([product, tiers]) => {
                Object.entries(tiers).forEach(([tierName, originalPrice]) => {
                    const tierBtn = document.querySelector(`[data-product="${product}"][data-tier="${tierName}"]`);
                    if (!tierBtn) return;

                    const discountedPrice = applyDiscount(originalPrice);
                    const priceToCompare = inclGst ? discountedPrice * 1.15 : discountedPrice;
                    const isSelected = selections[product]?.tiers?.[tierName]?.quantity > 0;

                    if (!isSelected && priceToCompare > remaining) {
                        tierBtn.classList.add('budget-exceeded');
                    } else {
                        tierBtn.classList.remove('budget-exceeded');
                    }
                });
            });

            // Check production options
            Object.entries(originalPrices.productions).forEach(([id, originalPrice]) => {
                const opt = document.querySelector(`#qty-${id}`)?.closest('.production-option');
                if (!opt) return;
                
                const discountedPrice = applyDiscount(originalPrice);
                const priceToCompare = inclGst ? discountedPrice * 1.15 : discountedPrice;
                const isSelected = opt.classList.contains('selected');

                if (!isSelected && priceToCompare > remaining) {
                    opt.classList.add('budget-exceeded');
                } else {
                    opt.classList.remove('budget-exceeded');
                }
            });

            // Check sports package
            const sportsActivate = document.querySelector('#sports-activate')?.closest('.sports-activate');
            if (sportsActivate) {
                const sportsMinBase = applyDiscount(350 + 300 + 150);
                const sportsMin = inclGst ? sportsMinBase * 1.15 : sportsMinBase;
                if (!selections['sports'].active && sportsMin > remaining) {
                    sportsActivate.classList.add('budget-exceeded');
                } else {
                    sportsActivate.classList.remove('budget-exceeded');
                }
            }

            // Check arts package
            const artsActivate = document.querySelector('#arts-activate')?.closest('.sports-activate');
            if (artsActivate) {
                const artsMinBase = applyDiscount(350 + 350 + 150);
                const artsMin = inclGst ? artsMinBase * 1.15 : artsMinBase;
                if (!selections['arts'].active && artsMin > remaining) {
                    artsActivate.classList.add('budget-exceeded');
                } else {
                    artsActivate.classList.remove('budget-exceeded');
                }
            }

            // Check training packages
            ['entry', 'basic', 'standard', 'premium'].forEach(tier => {
                const trainActivate = document.querySelector(`#training-${tier}-activate`)?.closest('.sports-activate');
                if (trainActivate) {
                    const minPriceBase = applyDiscount(originalPrices.training[tier].base);
                    const minPrice = inclGst ? minPriceBase * 1.15 : minPriceBase;
                    if (!selections['training'][tier].active && minPrice > remaining) {
                        trainActivate.classList.add('budget-exceeded');
                    } else {
                        trainActivate.classList.remove('budget-exceeded');
                    }
                }
            });

            // Check music video package
            const mvActivate = document.querySelector('#musicvideo-activate')?.closest('.sports-activate');
            if (mvActivate) {
                const mvMinBase = applyDiscount(600 + 375 + 450);
                const mvMin = inclGst ? mvMinBase * 1.15 : mvMinBase;
                if (!selections['musicvideo'].active && mvMin > remaining) {
                    mvActivate.classList.add('budget-exceeded');
                } else {
                    mvActivate.classList.remove('budget-exceeded');
                }
            }

            // Check campaigns (now discountable)
            const intlCampaign = document.querySelector('#campaign-international')?.closest('.campaign-offer');
            if (intlCampaign) {
                const intlPriceBase = applyDiscount(3500);
                const intlPrice = inclGst ? intlPriceBase * 1.15 : intlPriceBase;
                if (!selections['campaigns'].international && intlPrice > remaining) {
                    intlCampaign.classList.add('budget-exceeded');
                } else {
                    intlCampaign.classList.remove('budget-exceeded');
                }
            }

            // Check "Introducing Ourselves" campaign
            const ourselvesCampaign = document.getElementById('campaign-ourselves-offer');
            if (ourselvesCampaign) {
                const ourselvesPriceBase = applyDiscount(800);
                const ourselvesPrice = inclGst ? ourselvesPriceBase * 1.15 : ourselvesPriceBase;
                const ourselvesActive = document.getElementById('campaign-ourselves-activate').checked;
                if (!ourselvesActive && ourselvesPrice > remaining) {
                    ourselvesCampaign.classList.add('budget-exceeded');
                } else {
                    ourselvesCampaign.classList.remove('budget-exceeded');
                }
            }

            // Check "Testimonials" campaign
            const testimonialsCampaign = document.getElementById('campaign-testimonials-offer');
            if (testimonialsCampaign) {
                const testimonialsPriceBase = applyDiscount(150);
                const testimonialsPrice = inclGst ? testimonialsPriceBase * 1.15 : testimonialsPriceBase;
                const testimonialsActive = document.getElementById('campaign-testimonials-activate').checked;
                if (!testimonialsActive && testimonialsPrice > remaining) {
                    testimonialsCampaign.classList.add('budget-exceeded');
                } else {
                    testimonialsCampaign.classList.remove('budget-exceeded');
                }
            }

            // Check if photography would exceed (minimum 1 session)
            const photoActivate = document.querySelector('#photography-activate')?.closest('.sports-activate');
            if (photoActivate) {
                const photoMinBase = applyDiscount(150);
                const photoMin = inclGst ? photoMinBase * 1.15 : photoMinBase;
                if (!selections['photography'].active && photoMin > remaining) {
                    photoActivate.classList.add('budget-exceeded');
                } else {
                    photoActivate.classList.remove('budget-exceeded');
                }
            }

            // Check if posters would exceed (minimum 1 poster)
            const postersActivate = document.querySelector('#posters-activate')?.closest('.sports-activate');
            if (postersActivate) {
                const posterMinBase = applyDiscount(75);
                const posterMin = inclGst ? posterMinBase * 1.15 : posterMinBase;
                if (!selections['posters'].active && posterMin > remaining) {
                    postersActivate.classList.add('budget-exceeded');
                } else {
                    postersActivate.classList.remove('budget-exceeded');
                }
            }

            // Mark sliders red AND their parent sections ONLY if that section is active
            const allSliders = document.querySelectorAll('.sports-slider, .campaign-slider');
            allSliders.forEach(slider => {
                // Only mark slider red if over budget
                if (remaining < 0) {
                    slider.classList.add('over-budget');
                } else {
                    slider.classList.remove('over-budget');
                }
            });

            // Mark active sections' prices red when over budget (only sections with active sliders)
            // Sports
            const sportsBuilder = document.querySelector('#sports-options')?.closest('.sports-builder');
            if (sportsBuilder && selections['sports'].active && remaining < 0) {
                sportsBuilder.classList.add('over-budget');
            } else if (sportsBuilder) {
                sportsBuilder.classList.remove('over-budget');
            }

            // Arts
            const artsBuilder = document.querySelector('#arts-options')?.closest('.sports-builder');
            if (artsBuilder && selections['arts'].active && remaining < 0) {
                artsBuilder.classList.add('over-budget');
            } else if (artsBuilder) {
                artsBuilder.classList.remove('over-budget');
            }

            // Campaigns - only mark the specific active one
            if (ourselvesCampaign) {
                const ourselvesActive = document.getElementById('campaign-ourselves-activate').checked;
                if (ourselvesActive && remaining < 0) {
                    ourselvesCampaign.classList.add('over-budget');
                } else if (!ourselvesCampaign.classList.contains('budget-exceeded')) {
                    ourselvesCampaign.classList.remove('over-budget');
                }
            }
            if (testimonialsCampaign) {
                const testimonialsActive = document.getElementById('campaign-testimonials-activate').checked;
                if (testimonialsActive && remaining < 0) {
                    testimonialsCampaign.classList.add('over-budget');
                } else if (!testimonialsCampaign.classList.contains('budget-exceeded')) {
                    testimonialsCampaign.classList.remove('over-budget');
                }
            }

            // Photography
            const photoBuilder = document.querySelector('#photography-options')?.closest('.sports-builder');
            if (photoBuilder && selections['photography'].active && remaining < 0) {
                photoBuilder.classList.add('over-budget');
            } else if (photoBuilder) {
                photoBuilder.classList.remove('over-budget');
            }

            // Posters
            const postersBuilder = document.querySelector('#posters-options')?.closest('.sports-builder');
            if (postersBuilder && selections['posters'].active && remaining < 0) {
                postersBuilder.classList.add('over-budget');
            } else if (postersBuilder) {
                postersBuilder.classList.remove('over-budget');
            }

            // Training sections
            ['entry', 'basic', 'standard', 'premium'].forEach(tier => {
                const trainBuilder = document.querySelector(`#training-${tier}-options`)?.closest('.sports-builder');
                if (trainBuilder && selections['training'][tier].active && remaining < 0) {
                    trainBuilder.classList.add('over-budget');
                } else if (trainBuilder) {
                    trainBuilder.classList.remove('over-budget');
                }
            });

            // Music video
            const mvBuilder = document.querySelector('#musicvideo-options')?.closest('.sports-builder');
            if (mvBuilder && selections['musicvideo'].active && remaining < 0) {
                mvBuilder.classList.add('over-budget');
            } else if (mvBuilder) {
                mvBuilder.classList.remove('over-budget');
            }

            // Grand total turns red when over budget
            const totalAmount = document.getElementById('total-amount');
            if (totalAmount) {
                if (remaining < 0) {
                    totalAmount.classList.add('over-budget');
                } else {
                    totalAmount.classList.remove('over-budget');
                }
            }
        }

        function clearBudgetRestrictions() {
            document.querySelectorAll('.budget-exceeded').forEach(el => {
                el.classList.remove('budget-exceeded');
            });
            document.querySelectorAll('.sports-slider.over-budget, .campaign-slider.over-budget').forEach(el => {
                el.classList.remove('over-budget');
            });
            document.querySelectorAll('.sports-builder.over-budget, .campaign-offer.over-budget').forEach(el => {
                el.classList.remove('over-budget');
            });
            document.getElementById('total-amount')?.classList.remove('over-budget');
            
            // Reset budget progress bar
            const budgetFill = document.getElementById('budget-progress-fill');
            if (budgetFill) {
                budgetFill.style.width = '0%';
                budgetFill.classList.remove('warning', 'danger');
            }
        }

        function removeTier(product, tierName) {
            delete selections[product].tiers[tierName];
            document.getElementById(`qty-${product}-${tierName}`).textContent = '0';

            const tierBtns = document.querySelectorAll(`[data-product="${product}"][data-tier="${tierName}"]`);
            tierBtns.forEach(btn => btn.classList.remove('selected'));

            updateSummary();
        }

        function removeProduction(itemId) {
            delete selections['school-productions'].components[itemId];
            document.getElementById(`qty-${itemId}`).textContent = '0';
            updateSummary();
        }

        function removeProduct(product) {
            if (product === 'campaigns') {
                selections['campaigns'] = { international: false, ourselves: 0, testimonials: 0 };
                document.getElementById('campaign-international').checked = false;
                document.getElementById('campaign-ourselves-activate').checked = false;
                document.getElementById('campaign-testimonials-activate').checked = false;
                document.getElementById('campaign-ourselves').value = 1;
                document.getElementById('campaign-testimonials').value = 1;
                document.getElementById('campaign-ourselves-value').textContent = '1';
                document.getElementById('campaign-testimonials-value').textContent = '1';
                document.getElementById('campaign-ourselves-total').textContent = '$800';
                document.getElementById('campaign-testimonials-total').textContent = '$150';
                document.getElementById('campaign-ourselves-slider-row').style.display = 'none';
                document.getElementById('campaign-testimonials-slider-row').style.display = 'none';
                document.getElementById('campaign-ourselves-price-hint').style.display = '';
                document.getElementById('campaign-testimonials-price-hint').style.display = '';
            } else if (product === 'sports') {
                selections['sports'] = { active: false, games: 5, videoMins: 1, socialCut: false };
                document.getElementById('sports-activate').checked = false;
                document.getElementById('sports-games').value = 5;
                document.getElementById('sports-video').value = 1;
                document.getElementById('sports-social').checked = false;
                document.getElementById('sports-games-value').textContent = '5 games';
                document.getElementById('sports-video-value').textContent = '1 min';
                document.getElementById('sports-games-total').textContent = '$300';
                document.getElementById('sports-video-total').textContent = '$150';
                document.getElementById('sports-total').textContent = '$800';
                document.getElementById('sports-options').style.display = 'none';
            } else if (product === 'arts') {
                selections['arts'] = { active: false, events: 5, videoMins: 1, socialCut: false };
                document.getElementById('arts-activate').checked = false;
                document.getElementById('arts-events').value = 5;
                document.getElementById('arts-video').value = 1;
                document.getElementById('arts-social').checked = false;
                document.getElementById('arts-events-value').textContent = '5 events';
                document.getElementById('arts-video-value').textContent = '1 min';
                document.getElementById('arts-events-total').textContent = '$350';
                document.getElementById('arts-video-total').textContent = '$150';
                document.getElementById('arts-total').textContent = '$850';
                document.getElementById('arts-options').style.display = 'none';
            } else if (product === 'photography') {
                selections['photography'] = { active: false, sessions: 0 };
                document.getElementById('photography-activate').checked = false;
                document.getElementById('photography-sessions').value = 1;
                document.getElementById('photography-sessions-value').textContent = '1 session';
                document.getElementById('photography-total').textContent = '$150';
                document.getElementById('photography-options').style.display = 'none';
            } else if (product === 'posters') {
                selections['posters'] = { active: false, qty: 0, format1x1: false, format16x9: false, format9x16: false };
                document.getElementById('posters-activate').checked = false;
                document.getElementById('posters-qty').value = 1;
                document.getElementById('posters-1x1').checked = false;
                document.getElementById('posters-16x9').checked = false;
                document.getElementById('posters-9x16').checked = false;
                document.getElementById('posters-qty-value').textContent = '1 poster';
                document.getElementById('posters-base-total').textContent = '$75';
                document.getElementById('posters-total').textContent = '$75';
                document.getElementById('posters-options').style.display = 'none';
            } else if (product.startsWith('training-')) {
                const tier = product.replace('training-', '');
                selections['training'][tier] = { active: false, students: 5, days: 1 };
                document.getElementById(`training-${tier}-activate`).checked = false;
                document.getElementById(`training-${tier}-students`).value = 5;
                document.getElementById(`training-${tier}-days`).value = 1;
                document.getElementById(`training-${tier}-students-value`).textContent = '5 students';
                document.getElementById(`training-${tier}-days-value`).textContent = '1 day';
                document.getElementById(`training-${tier}-students-cost`).textContent = `$${trainingPrices[tier].base}`;
                document.getElementById(`training-${tier}-total`).textContent = `$${trainingPrices[tier].base}`;
                document.getElementById(`training-${tier}-options`).style.display = 'none';
            } else if (product === 'musicvideo') {
                selections['musicvideo'] = { active: false, students: 15, recordingDays: 1, shootDays: 1 };
                document.getElementById('musicvideo-activate').checked = false;
                document.getElementById('musicvideo-students').value = 15;
                document.getElementById('musicvideo-recording').value = 1;
                document.getElementById('musicvideo-shoot').value = 1;
                document.getElementById('musicvideo-students-value').textContent = '15 students';
                document.getElementById('musicvideo-recording-value').textContent = '1 day';
                document.getElementById('musicvideo-shoot-value').textContent = '1 day';
                document.getElementById('musicvideo-recording-total').textContent = '$375';
                document.getElementById('musicvideo-shoot-total').textContent = '$450';
                document.getElementById('musicvideo-total').textContent = '$1,425';
                document.getElementById('musicvideo-options').style.display = 'none';
            }
            updateSummary();
        }

        function clearAll() {
            // Clear standard products
            ['eoy-highlights', 'day-highlights', 'formal-events', 'recap-website', 'pamphlets'].forEach(product => {
                selections[product].tiers = {};

                ['Entry', 'Basic', 'Standard', 'Premium'].forEach(tier => {
                    const el = document.getElementById(`qty-${product}-${tier}`);
                    if (el) el.textContent = '0';
                });

                document.querySelectorAll(`[data-product="${product}"]`).forEach(btn => {
                    btn.classList.remove('selected');
                });
            });

            // Clear productions
            selections['school-productions'].components = {};
            ['recording-basic', 'recording-standard', 'recording-premium', 'highlights-standard', 'highlights-premium', 'documentary', 'full-package'].forEach(id => {
                const el = document.getElementById(`qty-${id}`);
                if (el) {
                    el.textContent = '0';
                    el.closest('.production-option')?.classList.remove('selected');
                }
            });

            // Clear campaigns
            removeProduct('campaigns');

            // Clear sports
            removeProduct('sports');

            // Clear arts
            removeProduct('arts');

            // Clear photography
            removeProduct('photography');

            // Clear posters
            removeProduct('posters');

            // Clear training
            ['entry', 'basic', 'standard', 'premium'].forEach(tier => {
                removeProduct(`training-${tier}`);
            });

            // Clear music video
            removeProduct('musicvideo');

            updateSummary();
        }

        // Close lightbox with escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeLightbox();
        });
    </script>
</body>
</html>